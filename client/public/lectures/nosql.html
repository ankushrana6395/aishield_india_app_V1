<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <meta name="description" content="Interactive NoSQL Injection Vulnerabilities Masterclass with Live Hinglish Translation | Quiz | Try It Yourself | By HTB Elite Hacker">
  <title>NoSQL Injection | By Ankush Rana</title>

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500;600;700;900&family=Roboto:wght@300;400;500;700&family=JetBrains+Mono:wght@300;400;500&display=swap" rel="stylesheet">

  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

  <style>
    :root {
      --primary: #0a1121;
      --dark-navy: #0b1b30;
      --neon-green: #00ff88;
      --electric-blue: #00aaff;
      --neon-orange: #ff8800;
      --neon-pink: #ff0080;
      --glow-green: rgba(0, 255, 136, 0.3);
      --glow-blue: rgba(0, 170, 255, 0.2);
      --glow-pink: rgba(255, 0, 128, 0.3);
      --light-gray: #e0e0e0;
      --mid-gray: #aaaaaa;
      --card-bg: #111c30;
      --border: #2a4060;
      --keyword: #ffdd57;
      --keyword-bg: rgba(255, 221, 87, 0.15);
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Roboto', sans-serif;
      background: var(--primary);
      color: var(--light-gray);
      line-height: 1.7;
      overflow-x: hidden;
    }

    /* Three.js Background */
    #three-canvas {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: -1;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 20px;
    }

    /* Translator Button */
    .translator-btn {
      position: fixed;
      top: 20px;
      right: 20px;
      z-index: 1000;
      background: var(--neon-green);
      color: var(--primary);
      border: none;
      border-radius: 6px;
      padding: 10px 16px;
      font-family: 'Orbitron', sans-serif;
      font-size: 0.9rem;
      cursor: pointer;
      box-shadow: 0 0 15px var(--glow-green);
      transition: all 0.3s ease;
    }

    .translator-btn:hover {
      transform: translateY(-2px);
      background: #00cc6d;
    }

    /* Header / Hero */
    header {
      height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      text-align: center;
      position: relative;
      overflow: hidden;
    }

    .hero-content {
      z-index: 2;
      max-width: 900px;
      position: relative;
    }

    .hero-content h1 {
      font-family: 'Orbitron', sans-serif;
      font-size: clamp(2.8rem, 8vw, 4rem);
      color: white;
      margin-bottom: 10px;
      text-shadow: 0 0 15px rgba(0, 255, 136, 0.6);
      animation: pulse 2s infinite;
    }

    @keyframes pulse {
      0% { text-shadow: 0 0 15px rgba(0, 255, 136, 0.6); }
      50% { text-shadow: 0 0 25px rgba(0, 255, 136, 0.9), 0 0 35px rgba(0, 255, 136, 0.5); }
      100% { text-shadow: 0 0 15px rgba(0, 255, 136, 0.6); }
    }

    .hero-content h1 span {
      color: var(--neon-green);
    }

    .subtitle {
      font-family: 'JetBrains Mono', monospace;
      font-size: clamp(1.2rem, 3.5vw, 1.5rem);
      color: var(--electric-blue);
      margin: 15px 0;
    }

    /* Section Styling */
    section {
      padding: 100px 0;
      position: relative;
    }

    .section-title {
      font-family: 'Orbitron', sans-serif;
      font-size: clamp(2rem, 5vw, 2.5rem);
      color: var(--neon-green);
      margin-bottom: 50px;
      position: relative;
      display: inline-block;
    }

    .section-title::after {
      content: '';
      position: absolute;
      left: 0;
      bottom: -8px;
      width: 70px;
      height: 4px;
      background: var(--electric-blue);
      animation: expand 2s infinite;
    }

    @keyframes expand {
      0% { width: 70px; }
      50% { width: 100px; }
      100% { width: 70px; }
    }

    /* Lecture Card */
    .lecture-card {
      background: var(--card-bg);
      border: 1px solid var(--border);
      border-radius: 16px;
      padding: 30px;
      margin: 30px 0;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
      transition: all 0.4s ease;
      position: relative;
      overflow: hidden;
      cursor: pointer;
    }

    .lecture-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(45deg, transparent, rgba(0, 255, 136, 0.05), transparent);
      z-index: 0;
    }

    .lecture-card.pop-out {
      transform: translateY(-20px) scale(1.05);
      box-shadow:
        0 30px 60px rgba(0, 0, 0, 0.5),
        0 0 50px var(--glow-green);
      border-color: var(--neon-green);
      z-index: 5;
    }

    .lecture-card.focused {
      transform: translateY(-20px) scale(1.06);
      box-shadow:
        0 40px 80px rgba(0, 0, 0, 0.6),
        0 0 70px var(--glow-green);
      filter: brightness(1.1);
    }

    .lecture-card h3 {
      color: var(--neon-green);
      font-family: 'Orbitron', sans-serif;
      margin-bottom: 18px;
      font-size: 1.8rem;
      position: relative;
      z-index: 2;
    }

    /* Keyword Style */
    .keyword {
      background: var(--keyword-bg);
      color: var(--keyword);
      padding: 3px 8px;
      border-radius: 4px;
      font-weight: 500;
      cursor: pointer;
      border-bottom: 1px dashed var(--keyword);
      position: relative;
      transition: all 0.3s ease;
      z-index: 2;
    }

    .keyword:hover {
      background: rgba(255, 221, 87, 0.3);
      box-shadow: 0 0 12px rgba(255, 221, 87, 0.4);
    }

    /* Tooltip (Modal) */
    .keyword-modal {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(10, 17, 33, 0.95);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 10000;
      opacity: 0;
      visibility: hidden;
      transition: all 0.3s ease;
    }

    .keyword-modal.active {
      opacity: 1;
      visibility: visible;
    }

    .modal-content {
      background: var(--card-bg);
      border: 2px solid var(--neon-green);
      border-radius: 14px;
      padding: 30px;
      max-width: 500px;
      width: 90%;
      box-shadow: 0 0 50px var(--glow-green);
      position: relative;
      transform: scale(0.9);
      transition: transform 0.3s ease;
    }

    .keyword-modal.active .modal-content {
      transform: scale(1);
    }

    .modal-close {
      position: absolute;
      top: 15px;
      right: 15px;
      background: none;
      border: none;
      color: var(--neon-green);
      font-size: 1.5rem;
      cursor: pointer;
    }

    .modal-title {
      color: var(--neon-green);
      font-family: 'Orbitron', sans-serif;
      margin-bottom: 15px;
      font-size: 1.5rem;
    }

    .modal-body {
      color: var(--light-gray);
      line-height: 1.6;
    }

    /* Interactive Demo */
    .interactive-demo {
      background: rgba(0, 20, 40, 0.6);
      border-radius: 10px;
      padding: 25px;
      margin: 30px 0;
      border: 1px solid var(--electric-blue);
    }

    .demo-container {
      display: flex;
      flex-direction: column;
      gap: 15px;
    }

    .input-group {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .input-group label {
      min-width: 120px;
      font-family: 'JetBrains Mono', monospace;
      color: var(--neon-green);
    }

    .input-group input {
      flex: 1;
      padding: 10px;
      background: rgba(0, 0, 0, 0.3);
      border: 1px solid var(--border);
      border-radius: 4px;
      color: white;
      font-family: 'JetBrains Mono', monospace;
    }

    .input-group input:focus {
      outline: none;
      border-color: var(--neon-green);
      box-shadow: 0 0 10px var(--glow-green);
    }

    .button {
      padding: 12px 24px;
      background: var(--neon-green);
      color: var(--primary);
      border: none;
      border-radius: 4px;
      font-family: 'Orbitron', sans-serif;
      font-weight: bold;
      cursor: pointer;
      transition: all 0.3s ease;
      width: fit-content;
    }

    .button:hover {
      background: #00cc6d;
      box-shadow: 0 0 15px var(--glow-green);
      transform: translateY(-2px);
    }

    .result-box {
      background: rgba(0, 0, 0, 0.5);
      border-radius: 6px;
      padding: 15px;
      margin-top: 15px;
      border-left: 3px solid var(--neon-green);
      font-family: 'JetBrains Mono', monospace;
      min-height: 100px;
      overflow-x: auto;
      white-space: pre-wrap;
    }

    /* Diagram */
    .diagram {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 20px;
      margin: 25px 0;
      flex-wrap: wrap;
    }

    .box {
      min-width: 140px;
      padding: 18px;
      border-radius: 12px;
      text-align: center;
      font-weight: bold;
      font-size: 0.95rem;
      position: relative;
      overflow: hidden;
    }

    .box::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(45deg, transparent, rgba(255, 255, 255, 0.1), transparent);
      transform: translateX(-100%);
    }

    .box:hover::before {
      animation: shimmer 1.5s infinite;
    }

    @keyframes shimmer {
      100% { transform: translateX(100%); }
    }

    .user-input { background: #8b0000; color: white; }
    .app { background: #003366; color: white; }
    .db { background: #004d00; color: #00ff88; }

    .arrow {
      font-size: 1.8rem;
      color: var(--neon-green);
      position: relative;
    }

    .arrow::before {
      content: '→';
      animation: arrow-pulse 1.5s infinite;
    }

    @keyframes arrow-pulse {
      0% { text-shadow: 0 0 5px var(--neon-green); }
      50% { text-shadow: 0 0 15px var(--neon-green); }
      100% { text-shadow: 0 0 5px var(--neon-green); }
    }

    /* Code Block */
    .code-block {
      background: #001a1a;
      color: #00ff88;
      font-family: 'JetBrains Mono', monospace;
      padding: 15px;
      border-radius: 10px;
      overflow-x: auto;
      margin: 15px 0;
      border-left: 4px solid var(--neon-green);
      position: relative;
    }

    .code-block::before {
      content: 'CODE';
      position: absolute;
      top: 0;
      right: 0;
      background: var(--neon-green);
      color: var(--primary);
      font-size: 0.7rem;
      padding: 2px 8px;
      border-bottom-left-radius: 4px;
      font-weight: bold;
    }

    /* Statistics Section */
    .stats-container {
      display: flex;
      flex-wrap: wrap;
      gap: 20px;
      justify-content: center;
      margin: 30px 0;
    }

    .stat-box {
      background: var(--card-bg);
      border: 1px solid var(--border);
      border-radius: 10px;
      padding: 20px;
      min-width: 200px;
      text-align: center;
      transition: all 0.3s ease;
    }

    .stat-box:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 20px rgba(0, 0, 0, 0.3);
      border-color: var(--neon-green);
    }

    .stat-number {
      font-size: 2.5rem;
      font-weight: bold;
      color: var(--neon-green);
      margin-bottom: 10px;
    }

    .stat-label {
      color: var(--mid-gray);
      font-size: 0.9rem;
    }

    /* Quiz Section */
    .quiz-container {
      background: var(--card-bg);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 25px;
      margin: 30px 0;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
    }

    .quiz-question {
      margin-bottom: 20px;
    }

    .quiz-question h4 {
      color: var(--neon-green);
      margin-bottom: 10px;
    }

    .options {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .option {
      background: rgba(0, 0, 0, 0.3);
      padding: 10px;
      border-radius: 6px;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .option:hover {
      background: rgba(0, 255, 136, 0.1);
      box-shadow: 0 0 10px rgba(0, 255, 136, 0.2);
    }

    .option.selected {
      background: var(--neon-green);
      color: var(--primary);
      font-weight: bold;
    }

    .score-display {
      text-align: center;
      font-size: 1.5rem;
      margin: 20px 0;
      color: var(--neon-green);
      font-family: 'Orbitron', sans-serif;
    }

    .button.quiz-submit {
      background: var(--neon-orange);
      color: white;
    }

    .button.quiz-submit:hover {
      background: #cc7000;
    }

    /* Progress Bar */
    .progress-container {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 4px;
      background: transparent;
      z-index: 1000;
    }

    .progress-bar {
      height: 100%;
      background: var(--neon-green);
      width: 0%;
      transition: width 0.3s ease;
    }

    /* Notification */
    .notification {
      position: fixed;
      bottom: 20px;
      right: 20px;
      background: var(--card-bg);
      border: 1px solid var(--neon-green);
      border-radius: 8px;
      padding: 15px;
      color: var(--light-gray);
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
      transform: translateY(100px);
      opacity: 0;
      transition: all 0.3s ease;
      z-index: 1000;
    }

    .notification.show {
      transform: translateY(0);
      opacity: 1;
    }

    /* Footer */
    footer {
      text-align: center;
      padding: 60px 0;
      background: var(--dark-navy);
      color: var(--mid-gray);
      position: relative;
      overflow: hidden;
    }

    footer::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 3px;
      background: linear-gradient(90deg, var(--neon-green), var(--electric-blue), var(--neon-pink));
    }

    .social-links {
      display: flex;
      justify-content: center;
      gap: 20px;
      margin-top: 20px;
    }

    .social-link {
      width: 50px;
      height: 50px;
      border-radius: 50%;
      background: var(--card-bg);
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-size: 1.2rem;
      transition: all 0.3s ease;
    }

    .social-link:hover {
      transform: translateY(-5px);
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
    }

    .social-link.github:hover { background: var(--neon-green); color: var(--primary); }
    .social-link.email:hover { background: var(--electric-blue); }
    .social-link.htb:hover { background: var(--neon-orange); }

    /* Responsive */
    @media (max-width: 768px) {
      .hero-content h1 { font-size: 2.8rem; }
      .section-title { font-size: 1.8rem; }
      .diagram { flex-direction: column; }
      .arrow::before { content: '↓'; }
      .input-group { flex-direction: column; }
      .input-group label { min-width: auto; }
    }
  </style>
</head>
<body>

  <!-- Progress Bar -->
  <div class="progress-container">
    <div class="progress-bar" id="progress-bar"></div>
  </div>

  <!-- Translator Button -->
  <button class="translator-btn" id="translator-btn" onclick="toggleLanguage()" style="right: auto; left: 20px;">
    🌐 Hinglish On
  </button>

  <!-- Keyword Modal -->
  <div class="keyword-modal" id="keyword-modal">
    <div class="modal-content">
      <button class="modal-close" id="modal-close">&times;</button>
      <h3 class="modal-title" id="modal-title">Keyword</h3>
      <div class="modal-body" id="modal-body">Definition will appear here.</div>
    </div>
  </div>

  <!-- Notification -->
  <div class="notification" id="notification">
    <i class="fas fa-info-circle"></i> <span id="notification-text">Welcome to the NoSQL Injection Vulnerabilities Masterclass!</span>
  </div>

  <!-- Three.js Background Canvas -->
  <canvas id="three-canvas"></canvas>

  <!-- Header / Hero -->
  <header id="home">
    <div class="container">
      <div class="hero-content"><!-- English Version -->
        <div class="en">
          <h1>NoSQL <span>Injection</span></h1>
          <div class="subtitle">By Ankush Rana | HTB Elite Hacker | Senior Security Engineer</div>
          <p>A deep dive into NoSQL injection vulnerabilities, query manipulation, and exploitation techniques — with interactive demos and elite-level insights.</p>
        </div>

        <!-- Hinglish Version -->
        <div class="hi" style="display:none;">
          <h1>NoSQL <span>Injection</span></h1>
          <div class="subtitle">Ankush Rana द्वारा | HTB Elite Hacker | Senior Security Engineer</div>
          <p>NoSQL injection vulnerabilities, query manipulation, aur exploitation techniques mein gahrai se jaane — interactive demos aur elite-level samajh ke saath.</p>
        </div>

        <!-- HTB & Bug Bounty Credibility -->
        <div style="margin-top: 40px; display: flex; align-items: center; gap: 25px; flex-wrap: wrap; justify-content: center; font-family: 'JetBrains Mono', monospace;">
          <img src="https://www.hackthebox.com/storage/achievements/elite_2024_badge.svg" alt="HTB Elite" style="width: 90px; filter: drop-shadow(0 0 10px rgba(0, 255, 136, 0.5));">
          <div style="text-align: center;">
            <img src="https://via.placeholder.com/100/0a1121/00ff88?text=AR" alt="Ankush Rana" style="width: 80px; height: 80px; border-radius: 50%; border: 2px solid var(--neon-green); filter: drop-shadow(0 0 10px rgba(0, 255, 136, 0.5));">
            <p style="margin: 5px 0 0; color: var(--neon-green);">52+ User Flags</p>
            <p style="margin: 0; color: var(--electric-blue);">47+ Root Owned</p>
          </div>
          <div style="text-align: center;">
            <p style="color: var(--neon-orange);">🏆 Top 10 India</p>
            <p style="color: var(--neon-pink);">💼 Sattrix | GPSSI</p>
          </div>
        </div>

        <!-- Call to Action -->
        <div style="margin-top: 30px; font-family: 'Orbitron', sans-serif; color: var(--electric-blue);">
          <i class="fas fa-mouse-pointer"></i> Toggle Hinglish Mode → <strong>Top Right Corner</strong>
        <div style="display: flex; justify-content: center; margin-top: 10px;"><button class="translator-btn" id="hero-translator-btn" onclick="toggleLanguage()" style="position: relative; margin: 0 auto;">🌐 Hinglish On</button></div>
        </div>
      </div>
    </div>
  </header>

  <!-- Section: What is NoSQL Injection? -->
  <section id="basics">
    <div class="container">
      <h2 class="section-title en">What is NoSQL Injection?</h2>
      <h2 class="section-title hi" style="display:none;">NoSQL Injection Kya Hai?</h2>

      <!-- Progress Tracker -->
      <div class="progress-tracker" style="display: flex; justify-content: space-between; margin: 20px 0; font-family: 'Orbitron', sans-serif;">
        <div class="progress-step active" style="text-align: center; flex: 1; padding: 10px; background: rgba(0, 255, 136, 0.1); border: 1px solid var(--neon-green); border-radius: 8px; margin: 0 5px;">
          <div class="step-number" style="font-size: 1.5rem; color: var(--neon-green);">1</div>
          <div class="step-title en">Basic Concepts</div>
          <div class="step-title hi" style="display:none;">Mool Baat</div>
        </div>
        <div class="progress-step" style="text-align: center; flex: 1; padding: 10px; background: rgba(0, 170, 255, 0.1); border: 1px solid var(--electric-blue); border-radius: 8px; margin: 0 5px;">
          <div class="step-number" style="font-size: 1.5rem; color: var(--electric-blue);">2</div>
          <div class="step-title en">Attack Vectors</div>
          <div class="step-title hi" style="display:none;">Hamlawar Ke Tarika</div>
        </div>
        <div class="progress-step" style="text-align: center; flex: 1; padding: 10px; background: rgba(255, 136, 0, 0.1); border: 1px solid var(--neon-orange); border-radius: 8px; margin: 0 5px;">
          <div class="step-number" style="font-size: 1.5rem; color: var(--neon-orange);">3</div>
          <div class="step-title en">Advanced Techniques</div>
          <div class="step-title hi" style="display:none;">Uchatam Tarika</div>
        </div>
        <div class="progress-step" style="text-align: center; flex: 1; padding: 10px; background: rgba(255, 0, 128, 0.1); border: 1px solid var(--neon-pink); border-radius: 8px; margin: 0 5px;">
          <div class="step-number" style="font-size: 1.5rem; color: var(--neon-pink);">4</div>
          <div class="step-title en">Prevention</div>
          <div class="step-title hi" style="display:none;">Bachav</div>
        </div>
      </div>

      <div class="lecture-card animate-on-scroll" onmouseenter="highlightCard(this)" onmouseleave="unhighlightCard(this)" onclick="focusCard(this)">
        <h3 class="en">Understanding NoSQL Injection</h3>
        <h3 class="hi" style="display:none;">NoSQL Injection Ki Samajh</h3>
        <p class="en">NoSQL injection occurs when user input is concatenated directly into NoSQL queries without proper sanitization. Unlike SQL injection, NoSQL injection exploits non-relational databases like MongoDB, DynamoDB, and CouchDB.</p>
        <p class="hi" style="display:none;">NoSQL injection tab hota hai jab upyogkartri ka input bina proper sanitization ke NoSQL queries mein directly concatenate kar diya jata hai. SQL injection ke ulte, NoSQL injection MongoDB, DynamoDB, aur CouchDB jaise non-relational databases ko exploit karta hai.</p>
        <p class="en"><strong>Real Analogy:</strong> Like manipulating a JSON query by injecting malicious operators instead of proper values. If the query parser blindly interprets injected code, the injection succeeds.</p>
        <p class="hi" style="display:none;"><strong>Asli Example:</strong> Jaise JSON query ko sarcastic operators inject karke manipulate karna ki bajaye proper values. Agar query parser injected code ko blindly interpret kar lega, toh injection successful hoga.</p>
        <p class="en">NoSQL injection is particularly dangerous when applications accept JSON input and directly insert it into database queries.</p>
        <p class="hi" style="display:none;">NoSQL injection particularly dangerous hoti hai jab applications JSON input accept karte hain aur directly useh ko database queries mein insert kar dete hain.</p>
        <p class="en"><span class="keyword" data-title="NoSQL Injection" data-content="An attack that exploits insufficient input validation when constructing NoSQL queries from user input.">NoSQL Injection</span> can lead to bypassing authentication, data exfiltration, and database corruption.</p>
        <p class="hi" style="display:none;"><span class="keyword" data-title="NoSQL Injection" data-content="User input se NoSQL queries construct karte samay insufficient input validation ka faida uthane wala attack.">NoSQL Injection</span> authentication bypass, data exfiltration, aur database corruption karne mein neta hai.</p>
      </div>

      <!-- NoSQL Injection Visualization -->
      <div class="lecture-card animate-on-scroll">
        <h3 class="en">How NoSQL Injection Works - Visualization</h3>
        <h3 class="hi" style="display:none;">NoSQL Injection Kaise Kaam Karta Hai - Chitra</h3>
        <div class="diagram" style="margin: 30px 0;">
          <div class="box user-input" style="min-width: 180px;">
            <div class="en">Malicious JSON</div>
            <div class="hi" style="display:none;">Dushit JSON</div>
            <div style="font-size: 0.8rem; margin-top: 10px;">{"username": "admin", "$or": [{}]}</div>
          </div>
          <div class="arrow"></div>
          <div class="box app" style="min-width: 180px;">
            <div class="en">Unsecured Parser</div>
            <div class="hi" style="display:none;">Asurakshit Parser</div>
            <div style="font-size: 0.8rem; margin-top: 10px;">db.users.find(query)</div>
          </div>
          <div class="arrow"></div>
          <div class="box db" style="min-width: 180px;">
            <div class="en">Database Access</div>
            <div class="hi" style="display:none;">Database Pravesh</div>
            <div style="font-size: 0.8rem; margin-top: 10px;">Bypassed Authentication</div>
          </div>
        </div>
        <p class="en">The injected operators like $or, $gt, $where are interpreted by the NoSQL database parser, causing the query to return unintended results.</p>
        <p class="hi" style="display:none;">Injected operators jaise $or, $gt, $where NoSQL database parser ke dwara interpret kiye jate hain, causing query ko unintended results return karne.</p>
      </div>

      <!-- Types of NoSQL Injection -->
      <div class="lecture-card animate-on-scroll">
        <h3 class="en">Types of NoSQL Injection</h3>
        <h3 class="hi" style="display:none;">NoSQL Injection Ke Prakar</h3>
        <ul style="margin: 15px 0 15px 30px;">
          <li class="en"><span class="keyword" data-title="Tautology" data-content="Where injection makes the condition always true (e.g., using $or: [{}] to match all documents).">Tautology Attack</span>: Making conditions always true ({"$or": [{}]} followed by anything)</li>
          <li class="hi" style="display:none;"><span class="keyword" data-title="Tautology" data-content="Jahan injection condition ko hamesha true bana deta hai (jaise $or: [{}] ka istemal sabhi documents ko match karne ke liye).">Tautology Attack</span>: Conditions ko hamesha true banana ({"$or": [{}]} followed by anything)</li>
          <li class="en"><span class="keyword" data-title="Union" data-content="Combining queries to extract additional data (similar to UNION-based SQL injection).">Union Queries</span>: Combining multiple queries to extract data</li>
          <li class="hi" style="display:none;"><span class="keyword" data-title="Union" data-content="Data extract karne ke liye multiple queries combine karna (SQL injection mein UNION-based ki tarah).">Union Queries</span>: Data extract karne ke liye multiple queries combine karna</li>
          <li class="en"><span class="keyword" data-title="Blind Injection" data-content="Where responses differ based on injected conditions without direct data exposure.">Blind Injection</span>: Extracting data through error responses or timing</li>
          <li class="hi" style="display:none;"><span class="keyword" data-title="Blind Injection" data-content="Jahan responses injected conditions ke aadhar par differ karte hain bina direct data exposure ke.">Blind Injection</span>: Error responses ya timing ke zariye data extract karna</li>
          <li class="en"><span class="keyword" data-title="JavaScript Injection" data-content="Injecting JavaScript code into $where clauses for server-side execution.">JavaScript Injection</span>: Executing JavaScript in $where clauses</li>
          <li class="hi" style="display:none;"><span class="keyword" data-title="JavaScript Injection" data-content="$where clauses mein JavaScript code inject karna server-side execution ke liye.">JavaScript Injection</span>: $where clauses mein JavaScript execute karna</li>
        </ul>
      </div>

      <!-- Statistics -->
      <div class="stats-container animate-on-scroll">
        <div class="stat-box">
          <div class="stat-number en">High</div>
          <div class="stat-number hi" style="display:none;">Ucca</div>
          <div class="stat-label en">impact severity</div>
          <div class="stat-label hi" style="display:none;">prabhav ka level</div>
        </div>
        <div class="stat-box">
          <div class="stat-number">MongoDB</div>
          <div class="stat-label en">Most vulnerable</div>
          <div class="stat-label hi" style="display:none;">Sabse kamjor</div>
        </div>
        <div class="stat-box">
          <div class="stat-number">$8K+</div>
          <div class="stat-label en">Avg. bounty payout</div>
          <div class="stat-label hi" style="display:none;">Avg. bounty payout</div>
        </div>
      </div>
    </div>
  </section>

  <!-- Section: Try It Yourself – NoSQL Injection -->
  <section id="try-nosql">
    <div class="container">
      <h2 class="section-title en">Try It Yourself: NoSQL Injection</h2>
      <h2 class="section-title hi" style="display:none;">Khud Try Karein: NoSQL Injection</h2>

      <!-- Learning Path Progress -->
      <div class="lecture-card animate-on-scroll">
        <h3 class="en">Learning Path: Basic to Advanced</h3>
        <h3 class="hi" style="display:none;">Sikshna Marg: Mool Se Uchatam</h3>
        <div class="progress-tracker" style="display: flex; justify-content: space-between; margin: 20px 0; font-family: 'Orbitron', sans-serif;">
          <div class="progress-step active" style="text-align: center; flex: 1; padding: 10px; background: rgba(0, 255, 136, 0.1); border: 1px solid var(--neon-green); border-radius: 8px; margin: 0 5px;">
            <div class="step-number" style="font-size: 1.2rem; color: var(--neon-green);">1</div>
            <div class="step-title en">Basic $or</div>
            <div class="step-title hi" style="display:none;">Mool $or</div>
          </div>
          <div class="progress-step" style="text-align: center; flex: 1; padding: 10px; background: rgba(0, 170, 255, 0.1); border: 1px solid var(--electric-blue); border-radius: 8px; margin: 0 5px;">
            <div class="step-number" style="font-size: 1.2rem; color: var(--electric-blue);">2</div>
            <div class="step-title en">Blind NOSQLi</div>
            <div class="step-title hi" style="display:none;">Andha NOSQLi</div>
          </div>
          <div class="progress-step" style="text-align: center; flex: 1; padding: 10px; background: rgba(255, 136, 0, 0.1); border: 1px solid var(--neon-orange); border-radius: 8px; margin: 0 5px;">
            <div class="step-number" style="font-size: 1.2rem; color: var(--neon-orange);">3</div>
            <div class="step-title en">$where Injection</div>
            <div class="step-title hi" style="display:none;">$where Injection</div>
          </div>
        </div>
      </div>

      <!-- Basic $or Demo -->
      <div class="interactive-demo animate-on-scroll">
        <h3 style="color: var(--neon-green); margin-bottom: 15px;" class="en">Level 1: Basic $or Injection</h3>
        <h3 style="color: var(--neon-green); margin-bottom: 15px; display:none;" class="hi">Level 1: Mool $or Injection</h3>
        <p class="en">Inject $or operator to bypass authentication by always returning true.</p>
        <p class="hi" style="display:none;">Authentication bypass karne ke liye hamesha true return karne wale $or operator inject karo.</p>
        <div class="demo-container">
          <div class="input-group">
            <label for="nosql-input" class="en">JSON Payload:</label>
            <label for="nosql-input" class="hi" style="display:none;">JSON Payload:</label>
            <input type="text" id="nosql-input" value='{"username": "admin", "$or": [{}]}'>
          </div>
          <button class="button" onclick="runNosqlExploit()">Inject Payload</button>
          <div class="result-box" id="nosql-result">
// Equivalent MongoDB query: db.users.find({"username": "admin", "$or": [{}]})
// This matches all documents where username="admin" OR true
          </div>
        </div>
      </div>

      <!-- Blind NoSQL Demo -->
      <div class="interactive-demo animate-on-scroll">
        <h3 style="color: var(--electric-blue); margin-bottom: 15px;" class="en">Level 2: Blind NoSQL Injection</h3>
        <h3 style="color: var(--electric-blue); margin-bottom: 15px; display:none;" class="hi">Level 2: Andha NoSQL Injection</h3>
        <p class="en">Use timing or error-based responses to extract data when direct output is not shown.</p>
        <p class="hi" style="display:none;">Jab direct output nazar nahi aata tab timing ya error-based responses ka upyog karke data extract karo.</p>
        <div class="demo-container">
          <div class="input-group">
            <label for="blind-nosql-input" class="en">Blind Payload:</label>
            <label for="blind-nosql-input" class="hi" style="display:none;">Andha Payload:</label>
            <input type="text" id="blind-nosql-input" value='{"password": {"$regex": "^.'}>
          </div>
          <div class="code-block">
// Testing single characters: password starts with "^a", "^b", etc.
// Longer strings: {"$regex": "^admin"}, {"$regex": "^passw"}
          </div>
        </div>
      </div>

      <!-- $where Injection Demo -->
      <div class="interactive-demo animate-on-scroll">
        <h3 style="color: var(--neon-orange); margin-bottom: 15px;" class="en">Level 3: $where JavaScript Injection</h3>
        <h3 style="color: var(--neon-orange); margin-bottom: 15px; display:none;" class="hi">Level 3: $where JavaScript Injection</h3>
        <p class="en">Inject JavaScript code into $where clauses to execute arbitrary code on the MongoDB server.</p>
        <p class="hi" style="display:none;">MongoDB server par arbitrary code execute karne ke liye $where clauses mein JavaScript code inject karo.</p>
        <div class="demo-container">
          <div class="input-group">
            <label for="where-nosql-input" class="en">$where Payload:</label>
            <label for="where-nosql-input" class="hi" style="display:none;">$where Payload:</label>
            <input type="text" id="where-nosql-input" value='{"$where": "this.password.length > 0"}'>
          </div>
          <div class="code-block">
// Dangerous payloads:
// {"$where": "sleep(5000)"}
// {"$where": "this.constructor.constructor"}
// {"$where": "function() { return true; }"}
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Section: Bypass Techniques -->
  <section id="bypass">
    <div class="container">
      <h2 class="section-title en">Advanced Attack Techniques</h2>
      <h2 class="section-title hi" style="display:none;">Uchatam Hamlawar Tarika</h2>

      <!-- Attack Vector Visualization -->
      <div class="lecture-card animate-on-scroll">
        <h3 class="en">NoSQL Injection Attack Vectors - Visualization</h3>
        <h3 class="hi" style="display:none;">NoSQL Injection Hamlawar Vectors - Chitra</h3>
        <div class="diagram" style="margin: 30px 0;">
          <div class="box user-input" style="min-width: 150px;">
            <div class="en">JSON Input</div>
            <div class="hi" style="display:none;">JSON Input</div>
            <div style="font-size: 0.8rem; margin-top: 10px;">Unsafe parsing</div>
          </div>
          <div class="arrow"></div>
          <div class="box app" style="min-width: 150px;">
            <div class="en">Injection Points</div>
            <div class="hi" style="display:none;">Injection Points</div>
            <div style="font-size: 0.8rem; margin-top: 10px;">$or, $gt, $where</div>
          </div>
          <div class="arrow"></div>
          <div class="box db" style="min-width: 150px;">
            <div class="en">Data Breach</div>
            <div class="hi" style="display:none;">Data Breach</div>
            <div style="font-size: 0.8rem; margin-top: 10px;">Authentication bypass</div>
          </div>
        </div>
      </div>

      <!-- Advanced Techniques with Examples -->
      <div class="lecture-card animate-on-scroll" onmouseenter="highlightCard(this)" onmouseleave="unhighlightCard(this)" onclick="focusCard(this)">
        <h3 class="en">Advanced NoSQL Injection Techniques</h3>
        <h3 class="hi" style="display:none;">Uchatam NoSQL Injection Tarika</h3>

        <!-- Operator Injection -->
        <div class="technique" style="margin: 20px 0; padding: 15px; border-left: 3px solid var(--neon-green); background: rgba(0, 255, 136, 0.05);">
          <h4 style="color: var(--neon-green);">1. Operator Injection</h4>
          <p class="en">Using MongoDB operators like $or, $and, $gte, $lte to manipulate query logic.</p>
          <p class="hi" style="display:none;">Query logic manipulate karne ke liye MongoDB operators jaise $or, $and, $gte, $lte ka upyog karein.</p>
          <div class="code-block">
// Authentication bypass
db.users.find({"username": "admin", "$or": [{}]})
OR
db.users.find({"password": {"$ne": null}})

// Numeric comparison
db.products.find({"price": {"$gt": "0"}})
db.scores.find({"points": {"$lte": "9000"}})
          </div>
        </div>

        <!-- Regex Injection -->
        <div class="technique" style="margin: 20px 0; padding: 15px; border-left: 3px solid var(--electric-blue); background: rgba(0, 170, 255, 0.05);">
          <h4 style="color: var(--electric-blue);">2. Regex Injection</h4>
          <p class="en">Exploiting regex operators like $regex and $options for blind data extraction.</p>
          <p class="hi" style="display:none;">Blind data extraction ke liye $regex aur $options jaise regex operators ko exploit karein.</p>
          <div class="code-block">
// Password extraction via regex
{"password": {"$regex": "^a"}}
{"password": {"$regex": "^ad"}}
{"password": {"$regex": "^adm"}}
{"password": {"$regex": "^admi"}}
{"password": {"$regex": "^admin"}}
          </div>
        </div>

        <!-- JavaScript Code Injection -->
        <div class="technique" style="margin: 20px 0; padding: 15px; border-left: 3px solid var(--neon-orange); background: rgba(255, 136, 0, 0.05);">
          <h4 style="color: var(--neon-orange);">3. JavaScript Code Injection</h4>
          <p class="en">Injecting arbitrary JavaScript code through $where clause for server-side execution.</p>
          <p class="hi" style="display:none;">Server-side execution ke liye $where clause ke zariye arbitrary JavaScript code inject karo.</p>
          <div class="code-block">
// Dangerous $where injections
db.collection.find({"$where": "this.secret == 'hackme'"})
db.collection.find({"$where": "return this.score > 9000"})
db.collection.find({"$where": "function() { return true; }"})
          </div>
        </div>

        <!-- NOSQL MapReduce -->
        <div class="technique" style="margin: 20px 0; padding: 15px; border-left: 3px solid var(--neon-pink); background: rgba(255, 0, 128, 0.05);">
          <h4 style="color: var(--neon-pink);">4. MapReduce Exploitation</h4>
          <p class="en">Exploiting MapReduce functions to execute arbitrary code and extract data.</p>
          <p class="hi" style="display:none;">Arbitrary code execute karne aur data extract karne ke liye MapReduce functions ko exploit karein.</p>
          <div class="code-block">
map = Code("function() { emit(this._id, 1); }");
reduce = Code("function() { return true; }");
db.collection.runCommand({"mapReduce": "users", "map": map, "reduce": reduce});
          </div>
        </div>
      </div>

      <!-- Real-World Case Studies -->
      <div class="lecture-card animate-on-scroll">
        <h3 class="en">Real-World Case Studies</h3>
        <h3 class="hi" style="display:none;">Vastavik Duniya Ke Udaharan</h3>

        <div class="case-study" style="margin: 20px 0; padding: 20px; border: 1px solid var(--border); border-radius: 8px; background: rgba(0, 0, 0, 0.2);">
          <h4 style="color: var(--neon-green);">Case Study 1: MongoDB-based CMS</h4>
          <p class="en"><strong>Scenario:</strong> A Content Management System using MongoDB for user authentication.</p>
          <p class="hi" style="display:none;"><strong>Paristhiti:</strong> User authentication ke liye MongoDB ka upyog karne wala Content Management System.</p>
          <p class="en"><strong>Exploitation:</strong> Used $or injection to login as admin without knowing credentials.</p>
          <p class="hi" style="display:none;"><strong>Doharpan:</strong> Credentials ko pata bina admin ke roop mein login karne ke liye $or injection ka upyog kiya gaya.</p>
          <p class="en"><strong>Impact:</strong> Complete database compromise and user data theft.</p>
          <p class="hi" style="display:none;"><strong>Prabhav:</strong> Pura database compromise aur user data theft.</p>
        </div>

        <div class="case-study" style="margin: 20px 0; padding: 20px; border: 1px solid var(--border); border-radius: 8px; background: rgba(0, 0, 0, 0.2);">
          <h4 style="color: var(--electric-blue);">Case Study 2: E-commerce Platform</h4>
          <p class="en"><strong>Scenario:</strong> An e-commerce platform using NoSQL database for product inventory.</p>
          <p class="hi" style="display:none;"><strong>Paristhiti:</strong> Product inventory ke liye NoSQL database ka istemal karne wala e-commerce platform.</p>
          <p class="en"><strong>Exploitation:</strong> Used regex injection to extract credit card information from product reviews.</p>
          <p class="hi" style="display:none;"><strong>Doharpan:</strong> Product reviews se credit card information extract karne ke liye regex injection ka upyog kiya gaya.</p>
          <p class="en"><strong>Impact:</strong> Payment information theft affecting thousands of customers.</p>
          <p class="hi" style="display:none;"><strong>Prabhav:</strong> Payment information theft affecting hazaron customers ko.</p>
        </div>
      </div>
    </div>
  </section>

  <!-- Section: Prevention -->
  <section id="prevention">
    <div class="container">
      <h2 class="section-title en">How to Prevent NoSQL Injection</h2>
      <h2 class="section-title hi" style="display:none;">NoSQL Injection Ko Kaise Rokein</h2>

      <!-- Prevention Visualization -->
      <div class="lecture-card animate-on-scroll">
        <h3 class="en">NoSQL Security Best Practices - Visualization</h3>
        <h3 class="hi" style="display:none;">NoSQL Security Best Practices - Chitra</h3>
        <div class="diagram" style="margin: 30px 0;">
          <div class="box user-input" style="min-width: 150px;">
            <div class="en">Malicious Input</div>
            <div class="hi" style="display:none;">Dushit Input</div>
            <div style="font-size: 0.8rem; margin-top: 10px;">{"$or": [{}]}</div>
          </div>
          <div class="arrow"></div>
          <div class="box app" style="min-width: 150px;">
            <div class="en">Sanitization Layer</div>
            <div class="hi" style="display:none;">Sanitization Layer</div>
            <div style="font-size: 0.8rem; margin-top: 10px;">Input validation</div>
          </div>
          <div class="arrow"></div>
          <div class="box db" style="min-width: 150px;">
            <div class="en">Safe Query</div>
            <div class="hi" style="display:none;">Safe Query</div>
            <div style="font-size: 0.8rem; margin-top: 10px;">Blocked injection</div>
          </div>
        </div>
      </div>

      <!-- Secure Coding Practices -->
      <div class="lecture-card animate-on-scroll" onmouseenter="highlightCard(this)" onmouseleave="unhighlightCard(this)" onclick="focusCard(this)">
        <h3 class="en">Secure Coding Practices</h3>
        <h3 class="hi" style="display:none;">Surakshit Coding Abhyas</h3>

        <!-- Input Validation -->
        <div class="practice" style="margin: 20px 0; padding: 15px; border-left: 3px solid var(--neon-green); background: rgba(0, 255, 136, 0.05);">
          <h4 style="color: var(--neon-green);">1. Strict Input Validation</h4>
          <p class="en">Validate and sanitize all user inputs, especially JSON data passed to database queries.</p>
          <p class="hi" style="display:none;">Sabhi user inputs ko validate aur sanitize karein, vishesh roop se JSON data jo database queries ko pas karayi jati hai.</p>
          <div class="code-block">
// Use proper schema validation
const userSchema = Joi.object({
  username: Joi.string().alphanum().min(3).max(30).required(),
  password: Joi.string().min(8).required(),
  email: Joi.string().email().required()
});

const { error } = userSchema.validate(userData);
if (error) { throw error; }
          </div>
        </div>

        <!-- Parameterized Queries -->
        <div class="practice" style="margin: 20px 0; padding: 15px; border-left: 3px solid var(--electric-blue); background: rgba(0, 170, 255, 0.05);">
          <h4 style="color: var(--electric-blue);">2. Use Parameterized Queries</h4>
          <p class="en">Use parameterized queries or object mapping layers to separate code from user data.</p>
          <p class="hi" style="display:none;">Code aur user data ko separate karne ke liye parameterized queries ya object mapping layers ka istemal karein.</p>
          <div class="code-block">
// Safe MongoDB query
const safeQuery = { username: userInput };
db.users.findOne(safeQuery);

// Avoid direct concatenation
// UNSAFE: db.users.find(`${userInput}`)
// UNSAFE: eval(userInput)
          </div>
        </div>

        <!-- Whitelist Approach -->
        <div class="practice" style="margin: 20px 0; padding: 15px; border-left: 3px solid var(--neon-orange); background: rgba(255, 136, 0, 0.05);">
          <h4 style="color: var(--neon-orange);">3. Whitelist Allowed Keys</h4>
          <p class="en">Only allow specific fields and operators in database queries using a whitelist approach.</p>
          <p class="hi" style="display:none;">Database queries mein sirf specific fields aur operators ko allow karo whitelist approach ka istemal karke.</p>
          <div class="code-block">
const allowedKeys = ['username', 'email', 'password'];
const allowedOperators = ['$eq', '$ne', '$gt', '$lt']; // No $or, $where, etc.

function sanitizeQuery(query) {
  for (const key in query) {
    if (!allowedKeys.includes(key)) delete query[key];
  }
  return query;
}
          </div>
        </div>

        <!-- Least Privilege -->
        <div class="practice" style="margin: 20px 0; padding: 15px; border-left: 3px solid var(--neon-pink); background: rgba(255, 0, 128, 0.05);">
          <h4 style="color: var(--neon-pink);">4. Least Privilege Principle</h4>
          <p class="en">Limit database user permissions to prevent JavaScript code execution and data manipulation.</p>
          <p class="hi" style="display:none;">JavaScript code execution aur data manipulation ko rokne ke liye database user permissions ko limit karein.</p>
          <div class="code-block">
// Create restricted user role
db.createUser({
  user: "appuser",
  pwd: "secure_password",
  roles: ["read", "write"], // No admin, no eval privileges
})
          </div>
        </div>
      </div>

      <!-- Prevention Testing Lab -->
      <div class="lecture-card animate-on-scroll">
        <h3 class="en">Lab Environment: Testing NoSQL Security</h3>
        <h3 class="hi" style="display:none;">Prayogshala Vatavaran: NoSQL Security Testing</h3>
        <p class="en">Set up a safe environment to test NoSQL injection prevention techniques.</p>
        <p class="hi" style="display:none;">NoSQL injection prevention techniques ko test karne ke liye surakshit vatanavaran sthapit karein.</p>

        <div class="interactive-demo animate-on-scroll">
          <h4 style="color: var(--neon-green);">NoSQL Injection Prevention Testing</h4>
          <div class="demo-container">
            <div class="input-group">
              <label for="test-nosql" class="en">Test Query:</label>
              <label for="test-nosql" class="hi" style="display:none;">Test Query:</label>
              <input type="text" id="test-nosql" value='{"username": "admin", "$or": [{}]}'>
            </div>
            <button class="button" onclick="testNosqlPrevention()" style="position: relative; z-index: 10;">Test Prevention</button>
            <div class="result-box" id="prevention-result">
// Results will appear here
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Section: Quiz -->
  <section id="quiz">
    <div class="container">
      <h2 class="section-title en">NoSQL Injection Knowledge Check</h2>
      <h2 class="section-title hi" style="display:none;">NoSQL Injection Jaankari Check</h2>
      <div class="quiz-container animate-on-scroll">
        <h3 style="color: var(--neon-green); text-align: center; margin-bottom: 20px;" class="en">Test Your Understanding</h3>
        <h3 style="color: var(--neon-green); text-align: center; margin-bottom: 20px; display:none;" class="hi">Apni Samajh Ko Test Karein</h3>
        <div id="quiz-questions">
          <!-- Questions will be injected here -->
        </div>
        <div class="score-display" id="score-display">Score: 0 / 10</div>
        <button class="button quiz-submit" onclick="submitQuiz()">Submit Quiz</button>
      </div>
    </div>
  </section>

  <!-- Footer -->
  <footer>
    <div class="container">
      <h3 class="en">By Ankush Rana | HTB Elite Hacker | Senior Security Engineer</h3>
      <h3 class="hi" style="display:none;">Ankush Rana Dwara | HTB Elite Hacker | Senior Security Engineer</h3>
      <p class="en">Mastering NoSQL Security. Breaking Systems.</p>
      <p class="hi" style="display:none;">NoSQL Security mein mahir. Systems todte hain.</p>

      <div class="social-links">
        <a href="https://github.com/ankushrana6395" target="_blank" class="social-link github">
          <i class="fab fa-github"></i>
        </a>
        <a href="mailto:ankushrana6395@gmail.com" class="social-link email">
          <i class="fas fa-envelope"></i>
        </a>
        <a href="https://app.hackthebox.com/profile/117501" target="_blank" class="social-link htb">
          <i class="fas fa-cube"></i>
        </a>
      </div>

      <p style="margin-top: 30px;" class="en">&copy; 2025 Ankush Rana. All Rights Reserved.</p>
      <p style="margin-top: 30px; display:none;" class="hi">&copy; 2025 Ankush Rana. Sabhi Adhikar Sanchit Hai.</p>
    </div>
  </footer>

  <!-- Three.js -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
  <script>
    let isHinglish = false;

    // Wait for DOM to be fully loaded
    document.addEventListener('DOMContentLoaded', function() {
      initializeApp();
    });

    function initializeApp() {
      // Initialize Three.js
      const canvas = document.getElementById('three-canvas');
      if (canvas) {
        const scene = new THREE.Scene();
        const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
        const renderer = new THREE.WebGLRenderer({ canvas, alpha: true, antialias: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));

        // Grid
        const gridHelper = new THREE.GridHelper(100, 100, 0x00ff88, 0x003322);
        gridHelper.position.z = -20;
        scene.add(gridHelper);

        // Floating Points
        const geometry = new THREE.BufferGeometry();
        const count = 500;
        const positions = new Float32Array(count * 3);
        for (let i = 0; i < count * 3; i++) {
          positions[i] = (Math.random() - 0.5) * 100;
        }
        geometry.setAttribute('position', new THREE.BufferAttribute(positions, 3));
        const material = new THREE.PointsMaterial({ color: 0x00ff88, size: 0.5, transparent: true, opacity: 0.8 });
        const points = new THREE.Points(geometry, material);
        scene.add(points);

        // Add floating cubes
        const cubeGeometry = new THREE.BoxGeometry(2, 2, 2);
        const cubeMaterial = new THREE.MeshBasicMaterial({
          color: 0x00aaff,
          wireframe: true,
          transparent: true,
          opacity: 0.5
        });
        const cubes = [];
        for (let i = 0; i < 10; i++) {
          const cube = new THREE.Mesh(cubeGeometry, cubeMaterial);
          cube.position.x = (Math.random() - 0.5) * 50;
          cube.position.y = (Math.random() - 0.5) * 50;
          cube.position.z = (Math.random() - 0.5) * 50;
          cube.rotation.x = Math.random() * Math.PI;
          cube.rotation.y = Math.random() * Math.PI;
          cubes.push({ mesh: cube, speed: Math.random() * 0.02 });
          scene.add(cube);
        }

        camera.position.z = 30;

        // Animation
        function animate() {
          requestAnimationFrame(animate);
          gridHelper.rotation.y += 0.005;
          points.rotation.y += 0.003;
          cubes.forEach(cube => {
            cube.mesh.rotation.x += cube.speed;
            cube.mesh.rotation.y += cube.speed;
          });
          renderer.render(scene, camera);
        }
        animate();

        // Resize
        window.addEventListener('resize', () => {
          camera.aspect = window.innerWidth / window.innerHeight;
          camera.updateProjectionMatrix();
          renderer.setSize(window.innerWidth, window.innerHeight);
        });
      }

      // Initialize keyword modal
      const keywordModal = document.getElementById('keyword-modal');
      const modalTitle = document.getElementById('modal-title');
      const modalBody = document.getElementById('modal-body');
      const modalClose = document.getElementById('modal-close');

      if (keywordModal && modalTitle && modalBody && modalClose) {
        document.querySelectorAll('.keyword').forEach(keyword => {
          keyword.addEventListener('click', function(e) {
            e.stopPropagation();
            modalTitle.textContent = this.getAttribute('data-title');
            modalBody.textContent = this.getAttribute('data-content');
            keywordModal.classList.add('active');
          });
        });

        modalClose.addEventListener('click', () => {
          keywordModal.classList.remove('active');
        });

        keywordModal.addEventListener('click', (e) => {
          if (e.target === keywordModal) {
            keywordModal.classList.remove('active');
          }
        });
      }

      // Initialize quiz
      renderNoSQLQuiz();

      // Initialize scroll animation
      const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) entry.target.classList.add('visible');
        });
      }, { threshold: 0.1 });

      document.querySelectorAll('.animate-on-scroll').forEach(el => observer.observe(el));
    }

    // Card Interaction Functions
    function highlightCard(card) {
      if (card) {
        card.classList.add('pop-out');
        showNotification('Hovering: ' + card.querySelector('h3').textContent);
      }
    }

    function unhighlightCard(card) {
      if (card && !card.classList.contains('focused')) {
        card.classList.remove('pop-out');
      }
    }

    function focusCard(card) {
      document.querySelectorAll('.lecture-card').forEach(c => {
        c.classList.remove('focused');
        c.classList.remove('pop-out');
      });

      if (card) {
        card.classList.add('focused');
        card.classList.add('pop-out');
        showNotification('Focused on: ' + card.querySelector('h3').textContent);
      }
    }

    // Language Toggle
    function toggleLanguage() {
      isHinglish = !isHinglish;
      const enElements = document.querySelectorAll('.en');
      const hiElements = document.querySelectorAll('.hi');

      enElements.forEach(el => {
        if (el) el.style.display = isHinglish ? 'none' : 'block';
      });

      hiElements.forEach(el => {
        if (el) el.style.display = isHinglish ? 'block' : 'none';
      });

      // Update both translator buttons
      const translatorBtns = document.querySelectorAll('.translator-btn');
      translatorBtns.forEach(btn => {
        if (btn) btn.textContent = isHinglish ? '🌐 English On' : '🌐 Hinglish On';
      });

      showNotification(isHinglish ? 'Hinglish mode activated!' : 'English mode activated!');

      // Re-render quiz with new language
      renderNoSQLQuiz();
    }

    // NoSQL Quiz Questions (10 Questions)
    const nosqlQuizQuestions = [
      {
        question: {
          en: "What is the main goal of NoSQL injection attacks?",
          hi: "NoSQL injection attacks ka mukhya uddeshya kya hota hai?"
        },
        options: {
          en: [
            "To delete all database records",
            "To bypass authentication and extract sensitive data",
            "To change database schema",
            "To prevent data indexing"
          ],
          hi: [
            "Sabhi database records ko delete karna",
            "Authentication bypass karna aur sensitive data extract karna",
            "Database schema badalna",
            "Data indexing ko rokna"
          ]
        },
        correct: 1,
        explanation: {
          en: "NoSQL injection bypasses security controls to access unauthorized data.",
          hi: "NoSQL injection security controls ko bypass karke unauthorized data tak pahuchta hai।"
        }
      },
      {
        question: {
          en: "Which operator is commonly used for NoSQL authentication bypass?",
          hi: "NoSQL authentication bypass ke liye kaunsa operator commonly use kiya jata hai?"
        },
        options: {
          en: [
            "$eq",
            "$or",
            "$sum",
            "$avg"
          ],
          hi: [
            "$eq",
            "$or",
            "$sum",
            "$avg"
          ]
        },
        correct: 1,
        explanation: {
          en: "$or: [{}] makes the query always true, effectively bypassing authentication.",
          hi: "$or: [{}] query ko hamesha true bana deta hai, authentiction bypass karke।"
        }
      },
      {
        question: {
          en: "What does $where injection allow in MongoDB?",
          hi: "MongoDB mein $where injection kya allow karta hai?"
        },
        options: {
          en: [
            "Client-side validation",
            "Server-side JavaScript execution",
            "Index optimization",
            "Data compression"
          ],
          hi: [
            "Client-side validation",
            "Server-side JavaScript execution",
            "Index optimization",
            "Data compression"
          ]
        },
        correct: 1,
        explanation: {
          en: "$where operator executes JavaScript code on the MongoDB server.",
          hi: "$where operator MongoDB server par JavaScript code execute karta hai।"
        }
      },
      {
        question: {
          en: "How can regex injection be used to extract data?",
          hi: "Data extract karne ke liye regex injection kaise use kiya ja sakta hai?"
        },
        options: {
          en: [
            "By using wildcards only",
            "By guessing characters one by one",
            "By compressing data",
            "By changing encoding"
          ],
          hi: [
            "Sirf wildcards ka istemal karke",
            "Characters ko ek ek guess karke",
            "Data compress karke",
            "Encoding badalke"
          ]
        },
        correct: 1,
        explanation: {
          en: "Regex injection uses patterns like '^a', '^ad', '^adm' to brute-force secret data.",
          hi: "Regex injection patterns jaise '^a', '^ad', '^adm' ka istemal karke secret data brute-force karta hai।"
        }
      },
      {
        question: {
          en: "What is the most effective prevention against NoSQL injection?",
          hi: "NoSQL injection ke khilaf sabse effective prevention kya hai?"
        },
        options: {
          en: [
            "Input sanitization",
            "Using parameterized queries and proper validation",
            "Database encryption",
            "Regular backups"
          ],
          hi: [
            "Input sanitization",
            "Parameterized queries aur proper validation ka istemal",
            "Database encryption",
            "Regular backups"
          ]
        },
        correct: 1,
        explanation: {
          en: "Parameterized queries prevent injection by separating code from user data.",
          hi: "Parameterized queries code aur user data ko separate karke injection ko prevent karte hain।"
        }
      },
      {
        question: {
          en: "Which operator is used for regular expression matching in MongoDB?",
          hi: "MongoDB mein regular expression matching ke liye kaunsa operator use hota hai?"
        },
        options: {
          en: [
            "$match",
            "$regex",
            "$pattern",
            "$find"
          ],
          hi: [
            "$match",
            "$regex",
            "$pattern",
            "$find"
          ]
        },
        correct: 1,
        explanation: {
          en: "$regex operator is can be misused for injection attacks in MongoDB.",
          hi: "$regex operator MongoDB mein injection attacks ke liye misused kiya ja sakta hai।"
        }
      },
      {
        question: {
          en: "What makes NoSQL injection different from SQL injection?",
          hi: "NoSQL injection SQL injection se kaise different hai?"
        },
        options: {
          en: [
            "It uses numbers instead of strings",
            "It exploits JSON operators and JavaScript execution",
            "It only affects read operations",
            "It requires physical access to the server"
          ],
          hi: [
            "Yeh strings ki jagah numbers use karta hai",
            "Yeh JSON operators aur JavaScript execution ko exploit karta hai",
            "Yeh sirf read operations ko affect karta hai",
            "Yeh server tak physical access require karta hai"
          ]
        },
        correct: 1,
        explanation: {
          en: "NoSQL injection uses MongoDB operators and JavaScript instead of SQL syntax.",
          hi: "NoSQL injection SQL syntax ki jagah MongoDB operators aur JavaScript use karta hai।"
        }
      },
      {
        question: {
          en: "How can JavaScript injection be prevented in NoSQL?",
          hi: "NoSQL mein JavaScript injection ko kaise prevent kar sakte hain?"
        },
        options: {
          en: [
            "Disable all operators",
            "Restrict database user privileges",
            "Use only numbers in queries",
            "Change database format"
          ],
          hi: [
            "Sabhi operators ko disable karo",
            "Database user privileges ko restrict karo",
            "Queries mein sirf numbers use karo",
            "Database format badalo"
          ]
        },
        correct: 1,
        explanation: {
          en: "Limited user privileges prevent execution of dangerous JavaScript code.",
          hi: "Limited user privileges dangerous JavaScript code ke execution ko prevent karte hain।"
        }
      },
      {
        question: {
          en: "What is the purpose of whitelist validation?",
          hi: "Whitelist validation ka purpose kya hota hai?"
        },
        options: {
          en: [
            "To accept all inputs",
            "To allow only approved operators and fields",
            "To log all queries",
            "To compress query size"
          ],
          hi: [
            "Sabhi inputs accept karna",
            "Sirf approved operators aur fields allow karna",
            "Sabhi queries log karna",
            "Query size compress karna"
          ]
        },
        correct: 1,
        explanation: {
          en: "Whitelist validation only allows safe inputs, blocking injection attempts.",
          hi: "Whitelist validation sirf safe inputs allow karta hai, injection attempts ko block karke।"
        }
      },
      {
        question: {
          en: "What database technology is most vulnerable to $or injection?",
          hi: "Kaunsi database technology $or injection se sabse zyada vulnerable hai?"
        },
        options: {
          en: [
            "MySQL",
            "PostgreSQL",
            "MongoDB",
            "SQLite"
          ],
          hi: [
            "MySQL",
            "PostgreSQL",
            "MongoDB",
            "SQLite"
          ]
        },
        correct: 2,
        explanation: {
          en: "MongoDB's query language makes it particularly susceptible to operator injection.",
          hi: "MongoDB ki query language useh operator injection ke liye particularly susceptible banati hai।"
        }
      }
    ];

    // Render NoSQL Quiz
    function renderNoSQLQuiz() {
      const quizContainer = document.getElementById('quiz-questions');
      if (!quizContainer) return;

      quizContainer.innerHTML = '';
      nosqlQuizQuestions.forEach((q, index) => {
        const questionDiv = document.createElement('div');
        questionDiv.className = 'quiz-question';
        const qText = isHinglish ? q.question.hi : q.question.en;
        const opts = isHinglish ? q.options.hi : q.options.en;
        questionDiv.innerHTML = `
          <h4>Q${index + 1}: ${qText}</h4>
          <div class="options" id="options-${index}">
            ${opts.map((opt, i) => `
              <div class="option" onclick="selectOption(${index}, ${i})">${opt}</div>
            `).join('')}
          </div>
        `;
        quizContainer.appendChild(questionDiv);
      });
    }

    // Track selected answers
    const selectedAnswers = new Array(nosqlQuizQuestions.length).fill(-1);

    // Select Option
    window.selectOption = function(questionIndex, optionIndex) {
      const optionsContainer = document.getElementById(`options-${questionIndex}`);
      if (!optionsContainer) return;

      optionsContainer.querySelectorAll('.option').forEach(opt => {
        opt.classList.remove('selected');
      });

      optionsContainer.querySelectorAll('.option')[optionIndex].classList.add('selected');
      selectedAnswers[questionIndex] = optionIndex;
    };

    // Submit Quiz
    window.submitQuiz = function() {
      let score = 0;
      const scoreDisplay = document.getElementById('score-display');
      if (!scoreDisplay) return;

      nosqlQuizQuestions.forEach((q, index) => {
        const optionsContainer = document.getElementById(`options-${index}`);
        if (!optionsContainer) return;

        const options = optionsContainer.querySelectorAll('.option');
        const explanation = isHinglish ? q.explanation.hi : q.explanation.en;

        if (selectedAnswers[index] === q.correct) {
          score++;
          options[q.correct].classList.add('correct');
          if (selectedAnswers[index] !== -1) options[selectedAnswers[index]].classList.add('correct');
        } else {
          options[q.correct].classList.add('correct');
          if (selectedAnswers[index] !== -1 && selectedAnswers[index] !== q.correct) {
            options[selectedAnswers[index]].classList.add('incorrect');
          }
        }
      });

      scoreDisplay.textContent = `Score: ${score} / ${nosqlQuizQuestions.length}`;
      showNotification(isHinglish ? `Quiz pura! Score: ${score}/${nosqlQuizQuestions.length}` : `Quiz complete! You scored ${score}/${nosqlQuizQuestions.length}`);
    };

    // Notification
    function showNotification(message) {
      const notification = document.getElementById('notification');
      const notificationText = document.getElementById('notification-text');

      if (notification && notificationText) {
        notificationText.textContent = message;
        notification.classList.add('show');
        setTimeout(() => notification.classList.remove('show'), 3000);
      }
    }

    // Scroll Progress Bar
    window.addEventListener('scroll', () => {
      const progressBar = document.getElementById('progress-bar');
      if (!progressBar) return;

      const winHeight = window.innerHeight;
      const docHeight = document.documentElement.scrollHeight;
      const scrollTop = window.pageYOffset;
      const trackLength = docHeight - winHeight;
      const progress = scrollTop / trackLength * 100;
      progressBar.style.width = progress + '%';
    });

    // Interactive Demo Functions
    function runNosqlExploit() {
      const input = document.getElementById('nosql-input');
      const result = document.getElementById('nosql-result');

      if (!input || !result) return;

      const payload = input.value;

      result.innerHTML = isHinglish
        ? `<span style="color: #00ff88">🔍 NoSQL INJECTION ATTEMPT:</span> ${payload}<br><br>🚨 यह authentication bypass करने के लिए $or operator का कमाल है!<br><br>MongoDB equivalent:<br><code>db.users.find({"username": "admin", "$or": [{}]})</code><br><br>💡 यदि असुरक्षित parsing हो तो यह काम य करेगा!`
        : `<span style="color: #00ff88">🔍 NoSQL INJECTION ATTEMPT:</span> ${payload}<br><br>This uses $or operator to create a tautology attack!<br><br>MongoDB equivalent:<br><code>db.users.find({"username": "admin", "$or": [{}]})</code><br><br>If parsing is insecure, authentication will be bypassed!`;

      showNotification(isHinglish ? 'NoSQL injection simulated!' : 'NoSQL injection simulated!');
    }

    function testNosqlPrevention() {
      const input = document.getElementById('test-nosql');
      const result = document.getElementById('prevention-result');

      if (!input || !result) return;

      const query = input.value;

      result.innerHTML = isHinglish
        ? `<span style="color: #00ff88">🛡️ PREVENTION TEST:</span> ${query}<br><br>✅ सफेद सूची वैलिडेशन<br>✅ पैरामीटरीक्वर्ड क्वेरीज<br>✅ इनपुट संनिटाइजेशन<br><br><span style="color: #ff8800">⬇️ इन तकनीकों से injection को रोक सकते हैं!</span>`
        : `<span style="color: #00ff88">🛡️ PREVENTION TEST:</span> ${query}<br><br>✅ Whitelist validation<br>✅ Parameterized queries<br>✅ Input sanitization<br><br><span style="color: #ff8800">⬇️ These techniques prevent injection attacks!</span>`;

      showNotification(isHinglish ? 'Prevention tested!' : 'Prevention tested!');
    }
  </script>
</body>
</html>
