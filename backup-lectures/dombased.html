<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <meta name="description" content="Interactive DOM-Based Vulnerabilities Masterclass with Live Hinglish Translation | Quiz | Try It Yourself | By HTB Elite Hacker">
  <title>DOM-Based Vulnerabilities | By Ankush Rana</title>

  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500;600;700;900&family=Roboto:wght@300;400;500;700&family=JetBrains+Mono:wght@300;400;500&display=swap" rel="stylesheet">

  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

  <style>
    :root {
      --primary: #0a1121;
      --dark-navy: #0b1b30;
      --neon-green: #00ff88;
      --electric-blue: #00aaff;
      --neon-orange: #ff8800;
      --neon-pink: #ff0080;
      --glow-green: rgba(0, 255, 136, 0.3);
      --glow-blue: rgba(0, 170, 255, 0.2);
      --glow-pink: rgba(255, 0, 128, 0.3);
      --light-gray: #e0e0e0;
      --mid-gray: #aaaaaa;
      --card-bg: #111c30;
      --border: #2a4060;
      --keyword: #ffdd57;
      --keyword-bg: rgba(255, 221, 87, 0.15);
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Roboto', sans-serif;
      background: var(--primary);
      color: var(--light-gray);
      line-height: 1.7;
      overflow-x: hidden;
    }

    /* Three.js Background */
    #three-canvas {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: -1;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 20px;
    }

    /* Translator Button */
    .translator-btn {
      position: fixed;
      top: 20px;
      right: 20px;
      z-index: 1000;
      background: var(--neon-green);
      color: var(--primary);
      border: none;
      border-radius: 6px;
      padding: 10px 16px;
      font-family: 'Orbitron', sans-serif;
      font-size: 0.9rem;
      cursor: pointer;
      box-shadow: 0 0 15px var(--glow-green);
      transition: all 0.3s ease;
    }

    .translator-btn:hover {
      transform: translateY(-2px);
      background: #00cc6d;
    }

    /* Header / Hero */
    header {
      height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      text-align: center;
      position: relative;
      overflow: hidden;
    }

    .hero-content {
      z-index: 2;
      max-width: 900px;
      position: relative;
    }

    .hero-content h1 {
      font-family: 'Orbitron', sans-serif;
      font-size: clamp(2.8rem, 8vw, 4rem);
      color: white;
      margin-bottom: 10px;
      text-shadow: 0 0 15px rgba(0, 255, 136, 0.6);
      animation: pulse 2s infinite;
    }

    @keyframes pulse {
      0% { text-shadow: 0 0 15px rgba(0, 255, 136, 0.6); }
      50% { text-shadow: 0 0 25px rgba(0, 255, 136, 0.9), 0 0 35px rgba(0, 255, 136, 0.5); }
      100% { text-shadow: 0 0 15px rgba(0, 255, 136, 0.6); }
    }

    .hero-content h1 span {
      color: var(--neon-green);
    }

    .subtitle {
      font-family: 'JetBrains Mono', monospace;
      font-size: clamp(1.2rem, 3.5vw, 1.5rem);
      color: var(--electric-blue);
      margin: 15px 0;
    }

    /* Section Styling */
    section {
      padding: 100px 0;
      position: relative;
    }

    .section-title {
      font-family: 'Orbitron', sans-serif;
      font-size: clamp(2rem, 5vw, 2.5rem);
      color: var(--neon-green);
      margin-bottom: 50px;
      position: relative;
      display: inline-block;
    }

    .section-title::after {
      content: '';
      position: absolute;
      left: 0;
      bottom: -8px;
      width: 70px;
      height: 4px;
      background: var(--electric-blue);
      animation: expand 2s infinite;
    }

    @keyframes expand {
      0% { width: 70px; }
      50% { width: 100px; }
      100% { width: 70px; }
    }

    /* Lecture Card */
    .lecture-card {
      background: var(--card-bg);
      border: 1px solid var(--border);
      border-radius: 16px;
      padding: 30px;
      margin: 30px 0;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
      transition: all 0.4s ease;
      position: relative;
      overflow: hidden;
      cursor: pointer;
    }

    .lecture-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(45deg, transparent, rgba(0, 255, 136, 0.05), transparent);
      z-index: 0;
    }

    .lecture-card.pop-out {
      transform: translateY(-20px) scale(1.05);
      box-shadow:
        0 30px 60px rgba(0, 0, 0, 0.5),
        0 0 50px var(--glow-green);
      border-color: var(--neon-green);
      z-index: 5;
    }

    .lecture-card.focused {
      transform: translateY(-20px) scale(1.06);
      box-shadow:
        0 40px 80px rgba(0, 0, 0, 0.6),
        0 0 70px var(--glow-green);
      filter: brightness(1.1);
    }

    .lecture-card h3 {
      color: var(--neon-green);
      font-family: 'Orbitron', sans-serif;
      margin-bottom: 18px;
      font-size: 1.8rem;
      position: relative;
      z-index: 2;
    }

    /* Keyword Style */
    .keyword {
      background: var(--keyword-bg);
      color: var(--keyword);
      padding: 3px 8px;
      border-radius: 4px;
      font-weight: 500;
      cursor: pointer;
      border-bottom: 1px dashed var(--keyword);
      position: relative;
      transition: all 0.3s ease;
      z-index: 2;
    }

    .keyword:hover {
      background: rgba(255, 221, 87, 0.3);
      box-shadow: 0 0 12px rgba(255, 221, 87, 0.4);
    }

    /* Tooltip (Modal) */
    .keyword-modal {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(10, 17, 33, 0.95);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 10000;
      opacity: 0;
      visibility: hidden;
      transition: all 0.3s ease;
    }

    .keyword-modal.active {
      opacity: 1;
      visibility: visible;
    }

    .modal-content {
      background: var(--card-bg);
      border: 2px solid var(--neon-green);
      border-radius: 14px;
      padding: 30px;
      max-width: 500px;
      width: 90%;
      box-shadow: 0 0 50px var(--glow-green);
      position: relative;
      transform: scale(0.9);
      transition: transform 0.3s ease;
    }

    .keyword-modal.active .modal-content {
      transform: scale(1);
    }

    .modal-close {
      position: absolute;
      top: 15px;
      right: 15px;
      background: none;
      border: none;
      color: var(--neon-green);
      font-size: 1.5rem;
      cursor: pointer;
    }

    .modal-title {
      color: var(--neon-green);
      font-family: 'Orbitron', sans-serif;
      margin-bottom: 15px;
      font-size: 1.5rem;
    }

    .modal-body {
      color: var(--light-gray);
      line-height: 1.6;
    }

    /* Interactive Demo */
    .interactive-demo {
      background: rgba(0, 20, 40, 0.6);
      border-radius: 10px;
      padding: 25px;
      margin: 30px 0;
      border: 1px solid var(--electric-blue);
    }

    .demo-container {
      display: flex;
      flex-direction: column;
      gap: 15px;
    }

    .input-group {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .input-group label {
      min-width: 120px;
      font-family: 'JetBrains Mono', monospace;
      color: var(--neon-green);
    }

    .input-group input, .input-group select {
      flex: 1;
      padding: 10px;
      background: rgba(0, 0, 0, 0.3);
      border: 1px solid var(--border);
      border-radius: 4px;
      color: white;
      font-family: 'JetBrains Mono', monospace;
    }

    .input-group input:focus, .input-group select:focus {
      outline: none;
      border-color: var(--neon-green);
      box-shadow: 0 0 10px var(--glow-green);
    }

    .button {
      padding: 12px 24px;
      background: var(--neon-green);
      color: var(--primary);
      border: none;
      border-radius: 4px;
      font-family: 'Orbitron', sans-serif;
      font-weight: bold;
      cursor: pointer;
      transition: all 0.3s ease;
      width: fit-content;
    }

    .button:hover {
      background: #00cc6d;
      box-shadow: 0 0 15px var(--glow-green);
      transform: translateY(-2px);
    }

    .result-box {
      background: rgba(0, 0, 0, 0.5);
      border-radius: 6px;
      padding: 15px;
      margin-top: 15px;
      border-left: 3px solid var(--neon-green);
      font-family: 'JetBrains Mono', monospace;
      min-height: 100px;
      overflow-x: auto;
      white-space: pre-wrap;
    }

    /* Diagram */
    .diagram {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 20px;
      margin: 25px 0;
      flex-wrap: wrap;
    }

    .box {
      min-width: 140px;
      padding: 18px;
      border-radius: 12px;
      text-align: center;
      font-weight: bold;
      font-size: 0.95rem;
      position: relative;
      overflow: hidden;
    }

    .box::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(45deg, transparent, rgba(255, 255, 255, 0.1), transparent);
      transform: translateX(-100%);
    }

    .box:hover::before {
      animation: shimmer 1.5s infinite;
    }

    @keyframes shimmer {
      100% { transform: translateX(100%); }
    }

    .user-input { background: #8b0000; color: white; }
    .app { background: #003366; color: white; }
    .db { background: #004d00; color: #00ff88; }

    .arrow {
      font-size: 1.8rem;
      color: var(--neon-green);
      position: relative;
    }

    .arrow::before {
      content: '‚Üí';
      animation: arrow-pulse 1.5s infinite;
    }

    @keyframes arrow-pulse {
      0% { text-shadow: 0 0 5px var(--neon-green); }
      50% { text-shadow: 0 0 15px var(--neon-green); }
      100% { text-shadow: 0 0 5px var(--neon-green); }
    }

    /* Code Block */
    .code-block {
      background: #001a1a;
      color: #00ff88;
      font-family: 'JetBrains Mono', monospace;
      padding: 15px;
      border-radius: 10px;
      overflow-x: auto;
      margin: 15px 0;
      border-left: 4px solid var(--neon-green);
      position: relative;
    }

    .code-block::before {
      content: 'CODE';
      position: absolute;
      top: 0;
      right: 0;
      background: var(--neon-green);
      color: var(--primary);
      font-size: 0.7rem;
      padding: 2px 8px;
      border-bottom-left-radius: 4px;
      font-weight: bold;
    }

    /* Statistics Section */
    .stats-container {
      display: flex;
      flex-wrap: wrap;
      gap: 20px;
      justify-content: center;
      margin: 30px 0;
    }

    .stat-box {
      background: var(--card-bg);
      border: 1px solid var(--border);
      border-radius: 10px;
      padding: 20px;
      min-width: 200px;
      text-align: center;
      transition: all 0.3s ease;
    }

    .stat-box:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 20px rgba(0, 0, 0, 0.3);
      border-color: var(--neon-green);
    }

    .stat-number {
      font-size: 2.5rem;
      font-weight: bold;
      color: var(--neon-green);
      margin-bottom: 10px;
    }

    .stat-label {
      color: var(--mid-gray);
      font-size: 0.9rem;
    }

    /* Quiz Section */
    .quiz-container {
      background: var(--card-bg);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 25px;
      margin: 30px 0;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
    }

    .quiz-question {
      margin-bottom: 20px;
    }

    .quiz-question h4 {
      color: var(--neon-green);
      margin-bottom: 10px;
    }

    .options {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .option {
      background: rgba(0, 0, 0, 0.3);
      padding: 10px;
      border-radius: 6px;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .option:hover {
      background: rgba(0, 255, 136, 0.1);
      box-shadow: 0 0 10px rgba(0, 255, 136, 0.2);
    }

    .option.selected {
      background: var(--neon-green);
      color: var(--primary);
      font-weight: bold;
    }

    .score-display {
      text-align: center;
      font-size: 1.5rem;
      margin: 20px 0;
      color: var(--neon-green);
      font-family: 'Orbitron', sans-serif;
    }

    .button.quiz-submit {
      background: var(--neon-orange);
      color: white;
    }

    .button.quiz-submit:hover {
      background: #cc7000;
    }

    /* Progress Bar */
    .progress-container {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 4px;
      background: transparent;
      z-index: 1000;
    }

    .progress-bar {
      height: 100%;
      background: var(--neon-green);
      width: 0%;
      transition: width 0.3s ease;
    }

    /* Notification */
    .notification {
      position: fixed;
      bottom: 20px;
      right: 20px;
      background: var(--card-bg);
      border: 1px solid var(--neon-green);
      border-radius: 8px;
      padding: 15px;
      color: var(--light-gray);
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
      transform: translateY(100px);
      opacity: 0;
      transition: all 0.3s ease;
      z-index: 1000;
    }

    .notification.show {
      transform: translateY(0);
      opacity: 1;
    }

    /* Footer */
    footer {
      text-align: center;
      padding: 60px 0;
      background: var(--dark-navy);
      color: var(--mid-gray);
      position: relative;
      overflow: hidden;
    }

    footer::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 3px;
      background: linear-gradient(90deg, var(--neon-green), var(--electric-blue), var(--neon-pink));
    }

    .social-links {
      display: flex;
      justify-content: center;
      gap: 20px;
      margin-top: 20px;
    }

    .social-link {
      width: 50px;
      height: 50px;
      border-radius: 50%;
      background: var(--card-bg);
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-size: 1.2rem;
      transition: all 0.3s ease;
    }

    .social-link:hover {
      transform: translateY(-5px);
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
    }

    .social-link.github:hover { background: var(--neon-green); color: var(--primary); }
    .social-link.email:hover { background: var(--electric-blue); }
    .social-link.htb:hover { background: var(--neon-orange); }

    /* Responsive */
    @media (max-width: 768px) {
      .hero-content h1 { font-size: 2.8rem; }
      .section-title { font-size: 1.8rem; }
      .diagram { flex-direction: column; }
      .arrow::before { content: '‚Üì'; }
      .input-group { flex-direction: column; }
      .input-group label { min-width: auto; }
    }

    /* DOM-Based Vulnerabilities Specific Styles */
    .dom-demo {
      display: flex;
      flex-direction: column;
      gap: 15px;
      margin: 20px 0;
    }

    .vulnerable-code {
      background: rgba(0, 80, 0, 0.3);
      border-left: 4px solid var(--neon-green);
      padding: 15px;
      border-radius: 8px;
      font-family: 'JetBrains Mono', monospace;
      margin: 15px 0;
    }

    .exploit-code {
      background: rgba(128, 0, 0, 0.3);
      border-left: 4px solid var(--neon-orange);
      padding: 15px;
      border-radius: 8px;
      font-family: 'JetBrains Mono', monospace;
      margin: 15px 0;
    }
  </style>
</head>
<body>

  <!-- Progress Bar -->
  <div class="progress-container">
    <div class="progress-bar" id="progress-bar"></div>
  </div>

  <!-- Translator Button -->
  <button class="translator-btn" id="translator-btn" onclick="toggleLanguage()" style="right: auto; left: 20px;">
    üåê Hinglish On
  </button>

  <!-- Keyword Modal -->
  <div class="keyword-modal" id="keyword-modal">
    <div class="modal-content">
      <button class="modal-close" id="modal-close">&times;</button>
      <h3 class="modal-title" id="modal-title">Keyword</h3>
      <div class="modal-body" id="modal-body">Definition will appear here.</div>
    </div>
  </div>

  <!-- Notification -->
  <div class="notification" id="notification">
    <i class="fas fa-info-circle"></i> <span id="notification-text">Welcome to the DOM-Based Vulnerabilities Masterclass!</span>
  </div>

  <!-- Three.js Background Canvas -->
  <canvas id="three-canvas"></canvas>

  <!-- Header / Hero -->
  <header id="home">
    <div class="container">
      <div class="hero-content">
        <!-- English Version -->
        <div class="en">
          <h1>DOM-Based <span>Vulnerabilities</span></h1>
          <div class="subtitle">By Ankush Rana | HTB Elite Hacker | Senior Security Engineer</div>
          <p>A deep dive into DOM-based vulnerabilities, client-side attack vectors, and real-world exploitation techniques ‚Äî with interactive demos and elite-level insights.</p>
        </div>

        <!-- Hinglish Version -->
        <div class="hi" style="display:none;">
          <h1>DOM-Based <span>Vulnerabilities</span></h1>
          <div class="subtitle">Ankush Rana ‡§¶‡•ç‡§µ‡§æ‡§∞‡§æ | HTB Elite Hacker | Senior Security Engineer</div>
          <p>DOM-based vulnerabilities, client-side hamla ke tarikon, aur vastavik duniya ke doharan mein gahrai se jaane ‚Äî interactive demos aur elite-level samajh ke saath.</p>
        </div>

        <!-- HTB & Bug Bounty Credibility -->
        <div style="margin-top: 40px; display: flex; align-items: center; gap: 25px; flex-wrap: wrap; justify-content: center; font-family: 'JetBrains Mono', monospace;">
          <img src="https://www.hackthebox.com/storage/achievements/elite_2024_badge.svg" alt="HTB Elite" style="width: 90px; filter: drop-shadow(0 0 10px rgba(0, 255, 136, 0.5));">
          <div style="text-align: center;">
            <img src="https://via.placeholder.com/100/0a1121/00ff88?text=AR" alt="Ankush Rana" style="width: 80px; height: 80px; border-radius: 50%; border: 2px solid var(--neon-green); filter: drop-shadow(0 0 10px rgba(0, 255, 136, 0.5));">
            <p style="margin: 5px 0 0; color: var(--neon-green);">52+ User Flags</p>
            <p style="margin: 0; color: var(--electric-blue);">47+ Root Owned</p>
          </div>
          <div style="text-align: center;">
            <p style="color: var(--neon-orange);">üèÜ Top 10 India</p>
            <p style="color: var(--neon-pink);">üíº Sattrix | GPSSI</p>
          </div>
        </div>

        <!-- Call to Action -->
        <div style="margin-top: 30px; font-family: 'Orbitron', sans-serif; color: var(--electric-blue);">
          <i class="fas fa-mouse-pointer"></i> Toggle Hinglish Mode ‚Üí <strong>Top Left Corner</strong>
          <div style="display: flex; justify-content: center; margin-top: 10px;"><button class="translator-btn" id="translator-btn" onclick="toggleLanguage()" style="position: relative; margin: 0 auto;">üåê Hinglish On</button></div>
        </div>
      </div>
    </div>
  </header>

  <!-- Section: What are DOM-Based Vulnerabilities? -->
  <section id="basics">
    <div class="container">
      <h2 class="section-title en">What are DOM-Based Vulnerabilities?</h2>
      <h2 class="section-title hi" style="display:none;">DOM-Based Vulnerabilities Kya Hai?</h2>

      <!-- Progress Tracker -->
      <div class="progress-tracker" style="display: flex; justify-content: space-between; margin: 20px 0; font-family: 'Orbitron', sans-serif;">
        <div class="progress-step active" style="text-align: center; flex: 1; padding: 10px; background: rgba(0, 255, 136, 0.1); border: 1px solid var(--neon-green); border-radius: 8px; margin: 0 5px;">
          <div class="step-number" style="font-size: 1.5rem; color: var(--neon-green);">1</div>
          <div class="step-title en">DOM Basics</div>
          <div class="step-title hi" style="display:none;">DOM Mool</div>
        </div>
        <div class="progress-step" style="text-align: center; flex: 1; padding: 10px; background: rgba(0, 170, 255, 0.1); border: 1px solid var(--electric-blue); border-radius: 8px; margin: 0 5px;">
          <div class="step-number" style="font-size: 1.5rem; color: var(--electric-blue);">2</div>
          <div class="step-title en">XSS Vectors</div>
          <div class="step-title hi" style="display:none;">XSS Tarike</div>
        </div>
        <div class="progress-step" style="text-align: center; flex: 1; padding: 10px; background: rgba(255, 136, 0, 0.1); border: 1px solid var(--neon-orange); border-radius: 8px; margin: 0 5px;">
          <div class="step-number" style="font-size: 1.5rem; color: var(--neon-orange);">3</div>
          <div class="step-title en">Advanced Exploitation</div>
          <div class="step-title hi" style="display:none;">Uchatam Doharan</div>
        </div>
        <div class="progress-step" style="text-align: center; flex: 1; padding: 10px; background: rgba(255, 0, 128, 0.1); border: 1px solid var(--neon-pink); border-radius: 8px; margin: 0 5px;">
          <div class="step-number" style="font-size: 1.5rem; color: var(--neon-pink);">4</div>
          <div class="step-title en">Prevention</div>
          <div class="step-title hi" style="display:none;">Bachav</div>
        </div>
      </div>

      <div class="lecture-card animate-on-scroll" onmouseenter="highlightCard(this)" onmouseleave="unhighlightCard(this)" onclick="focusCard(this)">
        <h3 class="en">Understanding DOM-Based XSS</h3>
        <h3 class="hi" style="display:none;">DOM-Based XSS Ki Samajh</h3>
        <p class="en">DOM-Based XSS (Cross-Site Scripting) vulnerabilities occur when client-side scripts write user-provided data to the DOM (Document Object Model) without proper sanitization.</p>
        <p class="hi" style="display:none;">DOM-Based XSS (Cross-Site Scripting) vulnerabilities tab hoti hain jab client-side scripts upyogkartri dwara diye gaye data ko DOM (Document Object Model) mein bina proper sanitization ke write karte hain.</p>
        <p class="en"><strong>Real Analogy:</strong> Like a waiter taking your order and writing it on the menu board without checking if it's poisonous - the order (user input) gets served to other customers (users) exactly as received.</p>
        <p class="hi" style="display:none;"><strong>Asli Example:</strong> Jaise waiter apka order lene aur menu board par likhne ke baad check na kare ki woh poisonous hai - order (user input) piche ke customers (users) ko exactly waise hi diya jata hai jaise receive hua.</p>
        <p class="en">DOM-based vulnerabilities are particularly dangerous because they execute entirely on the client side, making them invisible to server-side security controls and WAFs.</p>
        <p class="hi" style="display:none;">DOM-based vulnerabilities khas taur par khatarnaak hain kyunki woh puri tarah client side par execute hote hain, jisse woh server-side security controls aur WAFs ke liye invisible ho jate hain.</p>
        <p class="en"><span class="keyword" data-title="DOM" data-content="Document Object Model: The programming interface for HTML and XML documents, representing the page as a tree of nodes that can be modified by JavaScript. It defines the structure, style, and content of web pages and allows dynamic manipulation of HTML elements and their properties. Client-side scripts use the DOM to interact with, read from, and modify the structure and content of web pages in real-time, enabling dynamic web applications and interactive user experiences.">DOM</span> manipulation is at the heart of all client-side attacks and is exploited through various JavaScript sources and sinks.</p>
        <p class="hi" style="display:none;"><span class="keyword" data-title="DOM" data-content="Document Object Model: HTML aur XML documents ke liye programming interface, jo page ko nodes ke tree ke roop mein dikhata hai jo JavaScript dwara modify kiya ja sakta hai. Yeh web pages ki structure, style, aur content ko define karta hai aur HTML elements aur unki properties ki dynamic manipulation ki anumati deta hai.">DOM</span> manipulation sabhi client-side attacks ke dil mein hai aur woh various JavaScript sources aur sinks ke through exploited ki jati hai.</p>
      </div>

      <!-- DOM Visualization -->
      <div class="lecture-card animate-on-scroll">
        <h3 class="en">How DOM-Based XSS Works - Visualization</h3>
        <h3 class="hi" style="display:none;">DOM-Based XSS Kaise Kaam Karta Hai - Chitra</h3>
        <div class="diagram" style="margin: 30px 0;">
          <div class="box user-input" style="min-width: 180px;">
            <div class="en">User Input</div>
            <div class="hi" style="display:none;">User Input</div>
            <div style="font-size: 0.8rem; margin-top: 10px;">Malicious Payload</div>
          </div>
          <div class="arrow"></div>
          <div class="box app" style="min-width: 180px;">
            <div class="en">JavaScript Source</div>
            <div class="hi" style="display:none;">JavaScript Source</div>
            <div style="font-size: 0.8rem; margin-top: 10px;">location.hash, document.URL</div>
          </div>
          <div class="arrow"></div>
          <div class="box db" style="min-width: 180px;">
            <div class="en">DOM Sink</div>
            <div class="hi" style="display:none;">DOM Sink</div>
            <div style="font-size: 0.8rem; margin-top: 10px;">innerHTML, eval()</div>
          </div>
        </div>
        <p class="en">User input flows from JavaScript sources (location.hash, document.URL) directly to DOM sinks (innerHTML, eval()) without filtering or sanitization.</p>
        <p class="hi" style="display:none;">User input JavaScript sources (location.hash, document.URL) se directly DOM sinks (innerHTML, eval()) mein behta hai bina filtering ya sanitization ke.</p>
      </div>

      <!-- Types of DOM-Based Vulnerabilities -->
      <div class="lecture-card animate-on-scroll">
        <h3 class="en">Common DOM-Based Vulnerabilities</h3>
        <h3 class="hi" style="display:none;">Common DOM-Based Vulnerabilities</h3>
        <ul style="margin: 15px 0 15px 30px;">
          <li class="en"><span class="keyword" data-title="DOM-XSS" data-content="DOM-based Cross-Site Scripting: Occurs when user input is directly written to the DOM without proper validation, allowing malicious JavaScript execution in the browser context.">DOM-XSS</span>: User input written to DOM without validation</li>
          <li class="hi" style="display:none;"><span class="keyword" data-title="DOM-XSS" data-content="DOM-based Cross-Site Scripting: Tab hoti hai jab user input bina proper validation ke directly DOM mein likha jata hai, jisse malicious JavaScript browser context mein execute ho sakta hai.">DOM-XSS</span>: User input bina validation ke DOM mein likha jana</li>
          <li class="en"><span class="keyword" data-title="Client-Side Injection" data-content="When untrusted data is used to build client-side code that gets executed, such as in eval() or Function constructors, leading to code injection vulnerabilities that can execute arbitrary malicious code in the browser environment.">Client-Side Injection</span>: Untrusted data used in client-side code execution</li>
          <li class="hi" style="display:none;"><span class="keyword" data-title="Client-Side Injection" data-content="Tab hoti hai jab untrusted data ko client-side code banane mein use kiya jata hai jo execute hota hai, jaise ki eval() ya Function constructors mein, jisse code injection vulnerabilities hoti hain jo browser environment mein arbitrary malicious code execute kar sakti hain.">Client-Side Injection</span>: Client-side code execution mein untrusted data ka upyog</li>
          <li class="en"><span class="keyword" data-title="DOM Clobbering" data-content="An attack technique where attackers manipulate HTML elements to override DOM properties, potentially allowing them to control JavaScript execution flow and access sensitive information or functionality in the webpage's context. This occurs through injecting malicious HTML elements that interfere with expected DOM structure and property values, creating unexpected behavior in client-side scripts and potentially enabling further exploitation of the application's logic and security mechanisms.">DOM Clobbering</span>: Manipulating DOM properties through HTML element injection</li>
          <li class="hi" style="display:none;"><span class="keyword" data-title="DOM Clobbering" data-content="Ek hamla technique jahan attackers HTML elements ko manipulate karte hain taaki woh DOM properties ko override kar sakein, jisse woh JavaScript execution flow ko control kar sake thee aur webpage ke context mein sensitive information ya functionality tak pravesh pa sakte hain. Yeh inject kiye gaye malicious HTML elements ke through hota hai jo expected DOM structure aur property values ko interfere karte hain.">DOM Clobbering</span>: HTML element injection ke through DOM properties ko manipulate karna</li>
          <li class="en"><span class="keyword" data-title="JavaScript Injection" data-content="Direct execution of malicious JavaScript code in the browser environment through various injection points like eval(), setTimeout(), or dynamically created script elements, allowing attackers to run arbitrary code and potentially compromise the webpage's security and user data by manipulating browser execution context and accessing sensitive browser APIs or local storage mechanisms delved into the core of JavaScript injection attacks, focusing on their mechanisms, real-world implications, and strategic prevention approaches. We'll explore different injection techniques, examine concrete examples, and develop robust defensive strategies to protect web applications from these sophisticated client-side exploitation methods. Key focus areas include understanding attack vectors, implementing input validation, and creating layered defenses against dynamic code execution risks.">JavaScript Injection</span>: Malicious code execution in browser context</li>
          <li class="hi" style="display:none;"><span class="keyword" data-title="JavaScript Injection" data-content="Browser environment mein malicious JavaScript code ka direct execution various injection points jaise eval(), setTimeout(), ya dynamically created script elements ke through, jisse attackers arbitrary code run kar sakte hain aur webpage ki security aur user data ko potentially compromise kar sakte hain browser execution context ko manipulate karke aur sensitive browser APIs ya local storage mechanisms tak pravesh pa sakte hain.">JavaScript Injection</span>: Browser context mein malicious code execution</li>
        </ul>
      </div>

      <!-- Statistics -->
      <div class="stats-container animate-on-scroll">
        <div class="stat-box">
          <div class="stat-number en">High</div>
          <div class="stat-number hi" style="display:none;">Uchi</div>
          <div class="stat-label en">impact rating</div>
          <div class="stat-label hi" style="display:none;">prabhav ka level</div>
        </div>
        <div class="stat-box">
          <div class="stat-number">75%</div>
          <div class="stat-label en">of XSS attacks</div>
          <div class="stat-label hi" style="display:none;">XSS attacks hain</div>
        </div>
        <div class="stat-box">
          <div class="stat-number">$10K+</div>
          <div class="stat-label en">in bug bounty rewards</div>
          <div class="stat-label hi" style="display:none;">bug bounty mein kamai</div>
        </div>
      </div>
    </div>
  </section>

  <!-- Section: Try It Yourself ‚Äì DOM-Based Vulnerabilities -->
  <section id="try-dom">
    <div class="container">
      <h2 class="section-title en">Try It Yourself: DOM-Based XSS Exploitation</h2>
      <h2 class="section-title hi" style="display:none;">Khud Try Karein: DOM-Based XSS Doharan</h2>

      <!-- Learning Path Progress -->
      <div class="lecture-card animate-on-scroll">
        <h3 class="en">Learning Path: Source to Sink</h3>
        <h3 class="hi" style="display:none;">Sikshna Marg: Source Se Sink</h3>
        <div class="progress-tracker" style="display: flex; justify-content: space-between; margin: 20px 0; font-family: 'Orbitron', sans-serif;">
          <div class="progress-step active" style="text-align: center; flex: 1; padding: 10px; background: rgba(0, 255, 136, 0.1); border: 1px solid var(--neon-green); border-radius: 8px; margin: 0 5px;">
            <div class="step-number" style="font-size: 1.2rem; color: var(--neon-green);">1</div>
            <div class="step-title en">Basic DOM-XSS</div>
            <div class="step-title hi" style="display:none;">Mool DOM-XSS</div>
          </div>
          <div class="progress-step" style="text-align: center; flex: 1; padding: 10px; background: rgba(0, 170, 255, 0.1); border: 1px solid var(--electric-blue); border-radius: 8px; margin: 0 5px;">
            <div class="step-number" style="font-size: 1.2rem; color: var(--electric-blue);">2</div>
            <div class="step-title en">Advanced Sources</div>
            <div class="step-title hi" style="display:none;">Uchatam Sources</div>
          </div>
          <div class="progress-step" style="text-align: center; flex: 1; padding: 10px; background: rgba(255, 136, 0, 0.1); border: 1px solid var(--neon-orange); border-radius: 8px; margin: 0 5px;">
            <div class="step-number" style="font-size: 1.2rem; color: var(--neon-orange);">3</div>
            <div class="step-title en">Sink Exploitation</div>
            <div class="step-title hi" style="display:none;">Sink Doharan</div>
          </div>
        </div>
      </div>

      <!-- Basic DOM-XSS Demo -->
      <div class="interactive-demo animate-on-scroll">
        <h3 style="color: var(--neon-green); margin-bottom: 15px;" class="en">Level 1: Basic DOM-XSS</h3>
        <h3 style="color: var(--neon-green); margin-bottom: 15px; display:none;" class="hi">Level 1: Mool DOM-XSS</h3>
        <p class="en">Exploit a basic DOM-XSS vulnerability using document.location or location.hash as source and innerHTML as sink.</p>
        <p class="hi" style="display:none;">document.location ya location.hash ko source aur innerHTML ko sink ke tarah use karke basic DOM-XSS vulnerability ka faida uthayein.</p>

        <div class="dom-demo">
          <div class="vulnerable-code">
            <strong>Vulnerable Code:</strong><br>
            var userInput = location.hash.substr(1);<br>
            document.getElementById('output').innerHTML = userInput;
          </div>

          <div class="input-group">
            <label for="xss-payload" class="en">XSS Payload:</label>
            <label for="xss-payload" class="hi" style="display:none;">XSS Payload:</label>
            <input type="text" id="xss-payload" value="<img src=x onerror=alert('DOM-XSS')>">
          </div>

          <button class="button" onclick="testBasicXSS()">Test Basic XSS</button>

          <div class="result-box" id="dom-result">
            <div id="output"></div>
          </div>
        </div>
      </div>

      <!-- Advanced DOM Exploitation Demo -->
      <div class="interactive-demo animate-on-scroll">
        <h3 style="color: var(--electric-blue); margin-bottom: 15px;" class="en">Level 2: Advanced DOM Exploitation</h3>
        <h3 style="color: var(--electric-blue); margin-bottom: 15px; display:none;" class="hi">Level 2: Uchatam DOM Doharan</h3>
        <p class="en">Test advanced DOM-XSS techniques using different sources and sinks.</p>
        <p class="hi" style="display:none;">Vibhinn sources aur sinks ka use karke advanced DOM-XSS techniques ko test karein.</p>

        <div class="demo-container">
          <div class="input-group">
            <label for="advanced-source" class="en">Source:</label>
            <label for="advanced-source" class="hi" style="display:none;">Source:</label>
            <select id="advanced-source">
              <option value="location.href">location.href</option>
              <option value="document.URL">document.URL</option>
              <option value="document.referrer">document.referrer</option>
              <option value="location.search">location.search</option>
            </select>
          </div>

          <div class="input-group">
            <label for="advanced-sink" class="en">Sink:</label>
            <label for="advanced-sink" class="hi" style="display:none;">Sink:</label>
            <select id="advanced-sink">
              <option value="innerHTML">innerHTML</option>
              <option value="eval">eval()</option>
              <option value="setTimeout">setTimeout()</option>
              <option value="Function">Function()</option>
            </select>
          </div>

          <button class="button" onclick="testAdvancedXSS()">Test Advanced XSS</button>

          <div class="result-box" id="advanced-result">
// Results will appear here
          </div>
        </div>
      </div>

      <!-- Sink Exploitation Demo -->
      <div class="interactive-demo animate-on-scroll">
        <h3 style="color: var(--neon-orange); margin-bottom: 15px;" class="en">Level 3: Sink Exploitation</h3>
        <h3 style="color: var(--neon-orange); margin-bottom: 15px; display:none;" class="hi">Level 3: Sink Doharan</h3>
        <p class="en">Explore different DOM sinks and their exploitation techniques.</p>
        <p class="hi" style="display:none;">Vibhinn DOM sinks aur unki doharan techniques explore karein.</p>

        <div class="demo-container">
          <div class="input-group">
            <label for="sink-technique" class="en">Technique:</label>
            <label for="sink-technique" class="hi" style="display:none;">Technique:</label>
            <select id="sink-technique">
              <option value="innerHTML">innerHTML Injection</option>
              <option value="eval">JavaScript eval()</option>
              <option value="script">Dynamic Script Injection</option>
              <option value="json">JSON Hijacking</option>
            </select>
          </div>

          <button class="button" onclick="testSinkTechnique()">Test Sink Technique</button>

          <div class="result-box" id="sink-result">
// Results will appear here
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Section: DOM Sources and Sinks -->
  <section id="sources-sinks">
    <div class="container">
      <h2 class="section-title en">DOM Sources and Sinks Deep Dive</h2>
      <h2 class="section-title hi" style="display:none;">DOM Sources aur Sinks Ki Gajai Samajh</h2>

      <!-- Common Sources -->
      <div class="lecture-card animate-on-scroll">
        <h3 class="en">Common DOM Sources</h3>
        <h3 class="hi" style="display:none;">Common DOM Sources</h3>
        <div class="code-block">
// JavaScript Sources:
location.href        // Current URL
location.hash        // Fragment identifier
location.search      // Query string
document.URL         // Complete URL
document.referrer    // Referring URL
document.cookie      // Cookies
window.name          // Window name
localStorage.getItem // Local storage values
sessionStorage.getItem// Session storage values
        </div>
      </div>

      <!-- Common Sinks -->
      <div class="lecture-card animate-on-scroll">
        <h3 class="en">Common DOM Sinks</h3>
        <h3 class="hi" style="display:none;">Common DOM Sinks</h3>
        <div class="code-block">
// Dangerous JavaScript Sinks:
innerHTML           // HTML injection
outerHTML           // HTML injection
document.write()    // Document writing
eval()             // Code execution
setTimeout()       // Delayed execution
setInterval()      // Repeated execution
Function()         // New function creation
insertAdjacentHTML // HTML insertion
        </div>
      </div>
    </div>
  </section>

  <!-- Section: Prevention -->
  <section id="prevention">
    <div class="container">
      <h2 class="section-title en">Prevention Strategies</h2>
      <h2 class="section-title hi" style="display:none;">Bachav Strategies</h2>

      <!-- Secure Coding Practices -->
      <div class="lecture-card animate-on-scroll">
        <h3 class="en">Secure DOM Manipulation</h3>
        <h3 class="hi" style="display:none;">Surakshit DOM Manipulation</h3>

        <!-- Input Validation -->
        <div class="practice" style="margin: 20px 0; padding: 15px; border-left: 3px solid var(--neon-green); background: rgba(0, 255, 136, 0.05);">
          <h4 style="color: var(--neon-green);">1. Input Validation & Sanitization</h4>
          <div class="code-block">
// Always sanitize user input before DOM insertion
function escapeHtml(text) {
  var map = {
    '&': '&',
    '<': '<',
    '>': '>',
    '"': '"',
    "'": '&#039;'
  };
  return text.replace(/[&<>"']/g, function(m) { return map[m]; });
}

// Safe usage:
var userInput = escapeHtml(location.hash.substr(1));
document.getElementById('output').textContent = userInput;

// Instead of:
document.getElementById('output').innerHTML = location.hash.substr(1);
          </div>
        </div>

        <!-- Safe Alternatives -->
        <div class="practice" style="margin: 20px 0; padding: 15px; border-left: 3px solid var(--electric-blue); background: rgba(0, 170, 255, 0.05);">
          <h4 style="color: var(--electric-blue);">2. Use Safe DOM APIs</h4>
          <div class="code-block">
// UNSAFE:
// document.getElementById('output').innerHTML = userInput;

// SAFE alternatives:
1. Use textContent instead of innerHTML for text-only content
   document.getElementById('output').textContent = userInput;

2. Use createElement and appendChild for dynamic elements
   var div = document.createElement('div');
   div.textContent = userInput;
   document.body.appendChild(div);

3. Use libraries like DOMPurify for complex HTML
   var clean = DOMPurify.sanitized(userInput);
   document.getElementById('output').innerHTML = clean;
          </div>
        </div>

        <!-- Content Security Policy -->
        <div class="practice" style="margin: 20px 0; padding: 15px; border-left: 3px solid var(--neon-orange); background: rgba(255, 136, 0, 0.05);">
          <h4 style="color: var(--neon-orange);">3. Content Security Policy</h4>
          <div class="code-block">
// CSP headers to prevent DOM-based XSS:
Content-Security-Policy: default-src 'self';
  script-src 'self';
  style-src 'self' 'unsafe-inline';
  img-src 'self';
  connect-src 'self';

// For DOM XSS specifically:
script-src 'self' 'nonce-randomValue';
style-src 'self' 'unsafe-inline';
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Section: Quiz -->
  <section id="quiz">
    <div class="container">
      <h2 class="section-title en">Knowledge Check</h2>
      <h2 class="section-title hi" style="display:none;">Jaankari Check Karein</h2>
      <div class="quiz-container animate-on-scroll">
        <h3 style="color: var(--neon-green); text-align: center; margin-bottom: 20px;" class="en">Test Your Understanding</h3>
        <h3 style="color: var(--neon-green); text-align: center; margin-bottom: 20px; display:none;" class="hi">Apni Samajh Ko Test Karein</h3>
        <div id="quiz-questions">
          <!-- Questions will be injected here -->
        </div>
        <div class="score-display" id="score-display">Score: 0 / 10</div>
        <button class="button quiz-submit" onclick="submitQuiz()">Submit Quiz</button>
      </div>
    </div>
  </section>

  <!-- Footer -->
  <footer>
    <div class="container">
      <h3 class="en">By Ankush Rana | HTB Elite Hacker | Senior Security Engineer</h3>
      <h3 class="hi" style="display:none;">Ankush Rana Dwara | HTB Elite Hacker | Senior Security Engineer</h3>
      <p class="en">Breaking Systems. Building Defenses.</p>
      <p class="hi" style="display:none;">Systems todte hain. Defenses banate hain.</p>

      <div class="social-links">
        <a href="https://github.com/ankushrana6395" target="_blank" class="social-link github">
          <i class="fab fa-github"></i>
        </a>
        <a href="mailto:ankushrana6395@gmail.com" class="social-link email">
          <i class="fas fa-envelope"></i>
        </a>
        <a href="https://app.hackthebox.com/profile/117501" target="_blank" class="social-link htb">
          <i class="fas fa-cube"></i>
        </a>
      </div>

      <p style="margin-top: 30px;" class="en">&copy; 2025 Ankush Rana. All Rights Reserved.</p>
      <p style="margin-top: 30px; display:none;" class="hi">&copy; 2025 Ankush Rana. Sabhi Adhikar Sanchit Hai.</p>
    </div>
  </footer>

  <!-- Three.js -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
  <script>
    (function() {
      // Shared variables
      let isHinglish = false;

      // Utility functions
      function showNotification(message) {
        const notification = document.getElementById('notification');
        const notificationText = document.getElementById('notification-text');
        if (notification && notificationText) {
          notificationText.textContent = message;
          notification.classList.add('show');
          setTimeout(() => notification.classList.remove('show'), 3000);
        }
      }

      // Card Interaction Functions
      window.highlightCard = function(card) {
        if (!card) return;
        card.classList.add('pop-out');
      };

      window.unhighlightCard = function(card) {
        if (!card) return;
        if (!card.classList.contains('focused')) {
          card.classList.remove('pop-out');
        }
      };

      window.focusCard = function(card) {
        if (!card) return;
        document.querySelectorAll('.lecture-card').forEach(c => {
          c.classList.remove('focused');
          c.classList.remove('pop-out');
        });
        card.classList.add('focused');
        card.classList.add('pop-out');
      };

      // Initialize Three.js
      const canvas = document.getElementById('three-canvas');
      const scene = new THREE.Scene();
      const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
      const renderer = new THREE.WebGLRenderer({ canvas, alpha: true, antialias: true });
      renderer.setSize(window.innerWidth, window.innerHeight);
      renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));

      // Grid
      const gridHelper = new THREE.GridHelper(100, 100, 0x00ff88, 0x003322);
      gridHelper.position.z = -20;
      scene.add(gridHelper);

      // Floating Points
      const geometry = new THREE.BufferGeometry();
      const count = 500;
      const positions = new Float32Array(count * 3);
      for (let i = 0; i < count * 3; i++) {
        positions[i] = (Math.random() - 0.5) * 100;
      }
      geometry.setAttribute('position', new THREE.BufferAttribute(positions, 3));
      const material = new THREE.PointsMaterial({ color: 0x00ff88, size: 0.5, transparent: true, opacity: 0.8 });
      const points = new THREE.Points(geometry, material);
      scene.add(points);

      // Add floating cubes
      const cubeGeometry = new THREE.BoxGeometry(2, 2, 2);
      const cubeMaterial = new THREE.MeshBasicMaterial({
        color: 0x00aaff,
        wireframe: true,
        transparent: true,
        opacity: 0.5
      });
      const cubes = [];
      for (let i = 0; i < 10; i++) {
        const cube = new THREE.Mesh(cubeGeometry, cubeMaterial);
        cube.position.x = (Math.random() - 0.5) * 50;
        cube.position.y = (Math.random() - 0.5) * 50;
        cube.position.z = (Math.random() - 0.5) * 50;
        cube.rotation.x = Math.random() * Math.PI;
        cube.rotation.y = Math.random() * Math.PI;
        cubes.push({ mesh: cube, speed: Math.random() * 0.02 });
        scene.add(cube);
      }

      camera.position.z = 30;

      // Animation
      function animate() {
        requestAnimationFrame(animate);
        gridHelper.rotation.y += 0.005;
        points.rotation.y += 0.003;
        cubes.forEach(cube => {
          cube.mesh.rotation.x += cube.speed;
          cube.mesh.rotation.y += cube.speed;
        });
        renderer.render(scene, camera);
      }
      animate();

      // Resize
      window.addEventListener('resize', () => {
        camera.aspect = window.innerWidth / window.innerHeight;
        camera.updateProjectionMatrix();
        renderer.setSize(window.innerWidth, window.innerHeight);
      });

      // Keyword Modal
      const keywordModal = document.getElementById('keyword-modal');
      const modalTitle = document.getElementById('modal-title');
      const modalBody = document.getElementById('modal-body');
      const modalClose = document.getElementById('modal-close');
      document.querySelectorAll('.keyword').forEach(keyword => {
        keyword.addEventListener('click', function(e) {
          e.stopPropagation();
          modalTitle.textContent = this.getAttribute('data-title');
          modalBody.textContent = this.getAttribute('data-content');
          keywordModal.classList.add('active');
        });
      });
      modalClose.addEventListener('click', () => {
        keywordModal.classList.remove('active');
      });
      keywordModal.addEventListener('click', (e) => {
        if (e.target === keywordModal) {
          keywordModal.classList.remove('active');
        }
      });

      // Language Toggle
      const translatorBtn = document.getElementById('translator-btn');
      function toggleLanguage() {
        isHinglish = !isHinglish;
        const enElements = document.querySelectorAll('.en');
        const hiElements = document.querySelectorAll('.hi');
        enElements.forEach(el => el.style.display = isHinglish ? 'none' : 'block');
        hiElements.forEach(el => el.style.display = isHinglish ? 'block' : 'none');
        if (translatorBtn) {
          translatorBtn.textContent = isHinglish ? 'üåê English On' : 'üåê Hinglish On';
        }
        showNotification(isHinglish ? 'Hinglish mode activated!' : 'English mode activated!');
        renderQuiz();
      }

      // DOM XSS Testing Functions
      function testBasicXSS() {
        const payload = document.getElementById('xss-payload').value;
        const result = document.getElementById('dom-result');
        const output = document.getElementById('output');

        // Simulate vulnerable behavior (in real scenario, this would execute)
        output.innerHTML = payload;

        let message = isHinglish
          ? `‚úÖ Basic DOM-XSS test complete!\n\nPayload executed: ${payload}`
          : `‚úÖ Basic DOM-XSS test complete!\n\nPayload executed: ${payload}`;

        result.innerHTML = `<div id="output">${payload}</div>
        <br>${message}`;

        showNotification(isHinglish ? 'Basic XSS test safal!' : 'Basic XSS test successful!');
      }

      function testAdvancedXSS() {
        const source = document.getElementById('advanced-source').value;
        const sink = document.getElementById('advanced-sink').value;
        const result = document.getElementById('advanced-result');

        let message = `Source: ${source}, Sink: ${sink}\n`;

        switch(sink) {
          case 'innerHTML':
            message += isHinglish
              ? 'innerHTML injection chalta hai - HTML ki anumati di jati hai'
              : 'innerHTML injection allowed - HTML execution permitted';
            break;
          case 'eval':
            message += isHinglish
              ? 'eval() dangerous hai - JavaScript code execute hoga'
              : 'eval() is dangerous - JavaScript code will execute';
            break;
          case 'setTimeout':
            message += isHinglish
              ? 'setTimeout injection - delayed code execution'
              : 'setTimeout injection - delayed code execution';
            break;
          case 'Function':
            message += isHinglish
              ? 'Function constructor - dynamic code execution'
              : 'Function constructor - dynamic code execution';
            break;
        }

        result.innerHTML = `<strong>Advanced XSS Results:</strong><br>
        ${message}`;

        showNotification(isHinglish ? 'Advanced XSS test safal!' : 'Advanced XSS test successful!');
      }

      function testSinkTechnique() {
        const technique = document.getElementById('sink-technique').value;
        const result = document.getElementById('sink-result');

        let message = `<strong>Sink Technique:</strong> ${technique}<br><br>`;

        switch(technique) {
          case 'innerHTML':
            message += isHinglish
              ? 'HTML injection sink - jiska galat use kiya jata hai woh dangerous hai!'
              : 'HTML injection sink - most commonly misused and dangerous!';
            break;
          case 'eval':
            message += isHinglish
              ? 'JavaScript eval - pure code injection, sabse khatarnaak sink!'
              : 'JavaScript eval - pure code injection, most dangerous sink!';
            break;
          case 'script':
            message += isHinglish
              ? 'Dynamic script injection - browser mein code execute karega'
              : 'Dynamic script injection - executes code in browser context';
            break;
          case 'json':
            message += isHinglish
              ? 'JSON hijacking - object prototype manipulation through callback'
              : 'JSON hijacking - object prototype manipulation through callback';
            break;
        }

        result.innerHTML = message;

        showNotification(isHinglish ? 'Sink technique test safal!' : 'Sink technique test successful!');
      }

      // Quiz Questions
      const quizQuestions = [
        {
          question: {
            en: "What is DOM-based XSS?",
            hi: "DOM-based XSS kya hota hai?"
          },
          options: {
            en: [
              "User input written to DOM without validation",
              "Server-side XSS vulnerability",
              "Network-based XSS",
              "File system XSS"
            ],
            hi: [
              "User input bina validation ke DOM mein likha jana",
              "Server-side XSS vulnerability",
              "Network-based XSS",
              "File system XSS"
            ]
          },
          correct: 0,
          explanation: {
            en: "DOM-based XSS occurs when user input is directly written to the DOM without proper validation, allowing malicious scripts to execute.",
            hi: "DOM-based XSS tab hota hai jab user input bina proper validation ke directly DOM mein likha jata hai, jisse malicious scripts execute kar sakte hain."
          }
        },
        {
          question: {
            en: "Which of these is a common DOM source?",
            hi: "Inmein se kaunsa common DOM source hai?"
          },
          options: {
            en: [
              "location.hash",
              "sql.query",
              "file.read",
              "network.request"
            ],
            hi: [
              "location.hash",
              "sql.query",
              "file.read",
              "network.request"
            ]
          },
          correct: 0,
          explanation: {
            en: "location.hash is a common DOM source that can be manipulated by attackers through URL fragments.",
            hi: "location.hash ek common DOM source hai jo attackers dwara URL fragments ke through manipulate kiya ja sakta hai."
          }
        },
        {
          question: {
            en: "Which sink is most dangerous?",
            hi: "Kaunsa sink sabse khatarnaak hai?"
          },
          options: {
            en: [
              "eval()",
              "textContent",
              "getAttribute",
              "querySelector"
            ],
            hi: [
              "eval()",
              "textContent",
              "getAttribute",
              "querySelector"
            ]
          },
          correct: 0,
          explanation: {
            en: "eval() is the most dangerous sink as it allows arbitrary JavaScript code execution.",
            hi: "eval() sabse khatarnaak sink hai kyunki yeh arbitrary JavaScript code execution ki anumati deta hai."
          }
        },
        {
          question: {
            en: "What should replace innerHTML for text-only content?",
            hi: "Text-only content ke liye innerHTML ko kya replace karna chahiye?"
          },
          options: {
            en: [
              "textContent",
              "outerHTML",
              "insertAdjacentHTML",
              "document.write"
            ],
            hi: [
              "textContent",
              "outerHTML",
              "insertAdjacentHTML",
              "document.write"
            ]
          },
          correct: 0,
          explanation: {
            en: "textContent should be used instead of innerHTML when inserting text-only content to prevent XSS.",
            hi: "Text-only content insert karne ke liye innerHTML ke bajaye textContent ka use karna chahiye taaki XSS na ho."
          }
        },
        {
          question: {
            en: "Which is a prevention technique?",
            hi: "Kaunsa bachav technique hai?"
          },
          options: {
            en: [
              "Input sanitization",
              "Disabling JavaScript",
              "Removing all URLs",
              "Block all user input"
            ],
            hi: [
              "Input sanitization",
              "JavaScript disable karna",
              "Sabhi URLs remove karna",
              "Sabhi user input block karna"
            ]
          },
          correct: 0,
          explanation: {
            en: "Input sanitization is a key prevention technique for DOM-based XSS.",
            hi: "Input sanitization DOM-based XSS ke liye ek important bachav technique hai."
          }
        },
        {
          question: {
            en: "DOM-XSS is invisible to what?",
            hi: "DOM-XSS kiske liye invisible hota hai?"
          },
          options: {
            en: [
              "Server-side WAFs",
              "Client browsers",
              "User input",
              "Network security"
            ],
            hi: [
              "Server-side WAFs",
              "Client browsers",
              "User input",
              "Network security"
            ]
          },
          correct: 0,
          explanation: {
            en: "DOM-XSS is invisible to server-side security controls and WAFs because it executes client-side.",
            hi: "DOM-XSS server-side security controls aur WAFs ke liye invisible hota hai kyunki yeh client-side execute hota hai."
          }
        },
        {
          question: {
            en: "Which is NOT a DOM sink?",
            hi: "Kaunsa DOM sink nahi hai?"
          },
          options: {
            en: [
              "document.cookie",
              "eval()",
              "innerHTML",
              "Function()"
            ],
            hi: [
              "document.cookie",
              "eval()",
              "innerHTML",
              "Function()"
            ]
          },
          correct: 0,
          explanation: {
            en: "document.cookie is a source, not a sink. Sinks are code execution points.",
            hi: "document.cookie ek source hai, sink nahi. Sinks code execution points hote hain."
          }
        }
      ];

      // Render Quiz
      function renderQuiz() {
        const quizContainer = document.getElementById('quiz-questions');
        quizContainer.innerHTML = '';
        quizQuestions.forEach((q, index) => {
          const questionDiv = document.createElement('div');
          questionDiv.className = 'quiz-question';
          const qText = isHinglish ? q.question.hi : q.question.en;
          const opts = isHinglish ? q.options.hi : q.options.en;
          questionDiv.innerHTML = `
            <h4>Q${index + 1}: ${qText}</h4>
            <div class="options" id="options-${index}">
              ${opts.map((opt, i) => `
                <div class="option" onclick="selectOption(${index}, ${i})">${opt}</div>
              `).join('')}
            </div>
          `;
          quizContainer.appendChild(questionDiv);
        });
      }

      // Track selected answers
      const selectedAnswers = new Array(quizQuestions.length).fill(-1);

      // Select Option
      window.selectOption = function(questionIndex, optionIndex) {
        document.querySelectorAll(`#options-${questionIndex} .option`).forEach(opt => {
          opt.classList.remove('selected');
        });
        document.querySelectorAll(`#options-${questionIndex} .option`)[optionIndex].classList.add('selected');
        selectedAnswers[questionIndex] = optionIndex;
      };

      // Submit Quiz
      window.submitQuiz = function() {
        let score = 0;
        const feedbackDiv = document.createElement('div');
        feedbackDiv.id = 'quiz-feedback';
        feedbackDiv.style.display = 'block';
        document.getElementById('quiz-questions').appendChild(feedbackDiv);

        quizQuestions.forEach((q, index) => {
          const options = document.querySelectorAll(`#options-${index} .option`);
          const explanation = isHinglish ? q.explanation.hi : q.explanation.en;

          if (selectedAnswers[index] === q.correct) {
            score++;
            options[q.correct].classList.add('correct');
            if (selectedAnswers[index] !== -1) options[selectedAnswers[index]].classList.add('correct');
          } else {
            options[q.correct].classList.add('correct');
            if (selectedAnswers[index] !== -1 && selectedAnswers[index] !== q.correct) {
              options[selectedAnswers[index]].classList.add('incorrect');
            }
          }
        });

        document.getElementById('score-display').textContent = `Score: ${score} / ${quizQuestions.length}`;
        showNotification(isHinglish ? `Quiz pura! Score: ${score}/${quizQuestions.length}` : `Quiz complete! You scored ${score}/${quizQuestions.length}`);

        // Add feedback content
        feedbackDiv.innerHTML = '<h4 style="color: var(--neon-green); margin-top: 20px;">Explanations:</h4>';
        quizQuestions.forEach((q, index) => {
          const explanation = isHinglish ? q.explanation.hi : q.explanation.en;
          feedbackDiv.innerHTML += `<strong>Q${index + 1}:</strong> ${explanation}<br><br>`;
        });
      };

      // Initialize
      document.addEventListener('DOMContentLoaded', () => {
        // Scroll Progress Bar
        window.addEventListener('scroll', () => {
          const progressBar = document.getElementById('progress-bar');
          if (progressBar) {
            const winHeight = window.innerHeight;
            const docHeight = document.documentElement.scrollHeight;
            const scrollTop = window.pageYOffset;
            const trackLength = docHeight - winHeight;
            const progress = scrollTop / trackLength * 100;
            progressBar.style.width = progress + '%';
          }
        });

        // Animation on Scroll
        const observer = new IntersectionObserver((entries) => {
          entries.forEach(entry => {
            if (entry.isIntersecting) entry.target.classList.add('visible');
          });
        }, { threshold: 0.1 });
        document.querySelectorAll('.animate-on-scroll').forEach(el => observer.observe(el));

        renderQuiz();
      });

      // Expose functions
      window.toggleLanguage = toggleLanguage;
      window.testBasicXSS = testBasicXSS;
      window.testAdvancedXSS = testAdvancedXSS;
      window.testSinkTechnique = testSinkTechnique;
      window.selectOption = selectOption;
      window.submitQuiz = submitQuiz;

    })();
  </script>
</body>
</html>
